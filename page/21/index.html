<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="越努力越幸运">
<meta property="og:type" content="website">
<meta property="og:title" content="默默">
<meta property="og:url" content="https://yangjinheng.github.io/page/21/index.html">
<meta property="og:site_name" content="默默">
<meta property="og:description" content="越努力越幸运">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="默默">
<meta name="twitter:description" content="越努力越幸运">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://yangjinheng.github.io/page/21/">





  <title>默默</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?be46574a10a6c2b7f67e9c32a008cbd5";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">默默</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-前端知识">
          <a href="/categories/web/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-asterisk"></i> <br>
            
            前端知识
          </a>
        </li>
      
        
        <li class="menu-item menu-item-kubernetes">
          <a href="/categories/Kubernetes/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-cog"></i> <br>
            
            Kubernetes
          </a>
        </li>
      
        
        <li class="menu-item menu-item-运维笔记">
          <a href="/categories/运维笔记/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>
            
            运维笔记
          </a>
        </li>
      
        
        <li class="menu-item menu-item-python">
          <a href="/categories/Python/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-laptop"></i> <br>
            
            Python
          </a>
        </li>
      
        
        <li class="menu-item menu-item-golang">
          <a href="/categories/golang/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br>
            
            Golang
          </a>
        </li>
      
        
        <li class="menu-item menu-item-个人日志">
          <a href="/categories/个人日志/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-github-alt"></i> <br>
            
            个人日志
          </a>
        </li>
      
        
        <li class="menu-item menu-item-guestbook">
          <a href="/guestbook" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            给我留言
          </a>
        </li>
      

      
    </ul>
  

  
</nav>


 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://yangjinheng.github.io/2018/08/03/Linux/kvm-autoc-reatekvm/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jin Heng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="默默">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/03/Linux/kvm-autoc-reatekvm/" itemprop="url">KVM自动克隆</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-03T22:30:55+08:00">
                2018-08-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/运维笔记/" itemprop="url" rel="index">
                    <span itemprop="name">运维笔记</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言需求"><a href="#前言需求" class="headerlink" title="前言需求"></a>前言需求</h2><p>今天接到个私活，一个朋友需要把美国IDC机房的20台主机切割成虚拟机，每台主机切割成8个虚拟机，每台虚拟机安装一个操作系统，要求能够访问网页，又要重新拾起多年不用的 KVM 虚拟化了，废话不多说，现学现卖了。</p>
<h2 id="安装KVM"><a href="#安装KVM" class="headerlink" title="安装KVM"></a>安装KVM</h2><ul>
<li>环境准备</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">getenforce                           <span class="comment"># 检查 selinux 是否已经关闭</span></span><br><span class="line">systemctl status firewalld           <span class="comment"># 关闭防火墙</span></span><br><span class="line">lsmod | grep kvm                     <span class="comment"># 检查内核是否支持 KVM 模块，Linux 默认是集成了 KVM</span></span><br><span class="line">grep -Eo <span class="string">"vmx|svm"</span> /proc/cpuinfo     <span class="comment"># 检查CPU是否支持虚拟化</span></span><br></pre></td></tr></table></figure>
<ul>
<li>安装KVM</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum -y install qemu-kvm qemu-kvm-tools virt-manager libvirt virt-install</span><br><span class="line"></span><br><span class="line">systemctl start libvirtd.service     <span class="comment"># 启动 KVM 服务</span></span><br><span class="line">systemctl status libvirtd.service    <span class="comment"># 检查 KVM 服务是否正常启动</span></span><br></pre></td></tr></table></figure>
<h2 id="准备模板机"><a href="#准备模板机" class="headerlink" title="准备模板机"></a>准备模板机</h2><ul>
<li>准备系统镜像</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">CentOS 下载地址：http://isoredirect.centos.org/centos/7/isos/x86_64/CentOS-7-x86_64-Everything-1804.iso</span><br><span class="line"></span><br><span class="line">mkdir -p /kvm_data/images                                                 <span class="comment"># 新建系统镜像存放目录</span></span><br><span class="line">dd <span class="keyword">if</span>=/dev/sr0 of=/kvm_data/images/CentOS-7-x86_64-Everything-1804.iso    <span class="comment"># 将光盘镜像复制出来</span></span><br></pre></td></tr></table></figure>
<ul>
<li>准备模板磁盘</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">qemu-img create -f qcow2 /kvm_data/centos7.5.qcow2 20G                   <span class="comment"># 创建 qcow2 格式的磁盘</span></span><br><span class="line"></span><br><span class="line">qemu-img info /kvm_data/centos7.5.qcow2                                  <span class="comment"># 初始化磁盘</span></span><br></pre></td></tr></table></figure>
<ul>
<li>初始化虚拟机，指定CPU个数、内存大小、VNC端口，等硬件信息</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">virt-install --virt-type=kvm --name=centos7.5 --vcpus=2 -r 2048 -c /kvm_data/images/CentOS-7-x86_64-Everything-1804.iso --network network=default --graphics vnc,listen=0.0.0.0,port=9527 --noautoconsole --os-type=linux --os-variant=rhel7 --disk path=/kvm_data/centos7.5.qcow2,size=20,format=qcow2</span><br></pre></td></tr></table></figure>
<ul>
<li>初始化完成后使用VNC连接安装操作系统</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">VNC Viewer                   <span class="comment"># 下载这个软件连接，连接上面设置的本机的 VNC 端口，对模板机进行定制</span></span><br></pre></td></tr></table></figure>
<ul>
<li>常用管理命令</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">virsh start vhost_name                          <span class="comment"># 启动虚拟机</span></span><br><span class="line">virsh list --all                                <span class="comment"># 查看所有虚拟机</span></span><br><span class="line">virsh destroy vhost_name                        <span class="comment"># 关闭虚拟机电源</span></span><br><span class="line">virsh undefine name                             <span class="comment"># 删除主机配置</span></span><br><span class="line">virsh define file-name.xml                      <span class="comment"># 根据文件定义虚拟机</span></span><br><span class="line">virsh snapshot-create-as vhost_name vhost_name  <span class="comment"># 创建快照</span></span><br></pre></td></tr></table></figure>
<ul>
<li>KVM 文件组织</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/etc/libvirt/qemu/    <span class="comment"># 配置文件目录</span></span><br><span class="line">/kvm_data/*.qcow2     <span class="comment"># 主数据文件</span></span><br></pre></td></tr></table></figure>
<h2 id="定制模板机"><a href="#定制模板机" class="headerlink" title="定制模板机"></a>定制模板机</h2><ul>
<li>定制模板机，做克隆前准备</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#--------------------------------------------------克隆必须--------------------------------------------------</span></span><br><span class="line"><span class="comment"># 删除SSH主机密钥</span></span><br><span class="line">rm -rf /etc/ssh/ssh_host_*</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除设备规则文件</span></span><br><span class="line">rm -rf /etc/udev/rules.d/70-*</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除系统日志</span></span><br><span class="line">rm -rf /var/<span class="built_in">log</span>/*</span><br><span class="line"></span><br><span class="line"><span class="comment"># 清空登录前文字</span></span><br><span class="line"><span class="built_in">echo</span> &gt;/etc/issue.net</span><br><span class="line"><span class="built_in">echo</span> &gt;/etc/issue</span><br><span class="line"></span><br><span class="line"><span class="comment"># 登陆后欢迎文字</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">'\nWelcome to aliyun Elastic Compute Service!\n'</span> &gt;/etc/motd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改主机名</span></span><br><span class="line">HOSTNAME=localhost.localdomain</span><br><span class="line">sed -ir <span class="string">"/^HOSTNAME=/cHOSTNAME=<span class="variable">$HOSTNAME</span>"</span> /etc/sysconfig/network</span><br><span class="line"></span><br><span class="line">HOSTNAME=localhost.localdomain</span><br><span class="line">hostnamectl <span class="built_in">set</span>-hostname <span class="variable">$HOSTNAME</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># CentOS_6 关闭防火墙</span></span><br><span class="line">service iptables stop</span><br><span class="line">chkconfig iptables off</span><br><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld</span><br><span class="line"></span><br><span class="line"><span class="comment"># CentOS6 优化不必要的启动项</span></span><br><span class="line">chkconfig | awk <span class="string">'&#123;if ($1!~"crond|sshd|network|rsyslog|sysstat|chronyd")&#123;system("chkconfig "$1" off")&#125;&#125;'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭SElinux</span></span><br><span class="line">setenforce 0</span><br><span class="line">sed -i <span class="string">'/^SELINUX=/cSELINUX=disabled'</span> /etc/selinux/config</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用sudo授权</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"jinheng    ALL=(ALL)    NOPASSWD: ALL"</span> &gt;&gt;/etc/sudoers</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改语言为英文</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'LANG="en_US.UTF-8"'</span> &gt;/etc/sysconfig/i18n</span><br><span class="line"><span class="built_in">source</span> /etc/sysconfig/i18n</span><br><span class="line"></span><br><span class="line">localectl <span class="built_in">set</span>-locale LANG=en_US.UTF-8</span><br><span class="line"></span><br><span class="line"><span class="comment"># 同步系统时间</span></span><br><span class="line">sed -i <span class="string">'/^server/d'</span> /etc/chrony.conf</span><br><span class="line">sed -i <span class="string">'3iserver ntp1.aliyun.com iburst'</span> /etc/chrony.conf</span><br><span class="line">sed -i <span class="string">'3iserver cn.ntp.org.cn iburst'</span> /etc/chrony.conf</span><br><span class="line">sed -i <span class="string">'3iserver us.ntp.org.cn iburst'</span> /etc/chrony.conf</span><br><span class="line">chkconfig chronyd on</span><br><span class="line">service chronyd start</span><br><span class="line">systemctl <span class="built_in">enable</span> chronyd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装yum源</span></span><br><span class="line">rm -f /etc/yum.repos.d/* ; yum clean all</span><br><span class="line">curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-6.repo</span><br><span class="line">curl -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-6.repo</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装常用软件</span></span><br><span class="line">yum -y install lrzsz wget vim tree telnet nmap tcpdump lsof nc</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置网卡</span></span><br><span class="line">BOOTPROTO=static</span><br><span class="line">DEVICE=ens33</span><br><span class="line">ONBOOT=yes</span><br><span class="line">IPADDR=172.16.0.253</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">GATEWAY=172.16.0.254</span><br><span class="line">DNS1=180.76.76.76</span><br><span class="line">DNS2=223.5.5.5</span><br><span class="line"></span><br><span class="line"><span class="comment">#--------------------------------------------------SSH相关--------------------------------------------------</span></span><br><span class="line"><span class="comment"># 修改端口为5522</span></span><br><span class="line">sed -i <span class="string">'/Port 22/cPort 5522'</span> /etc/ssh/sshd_config</span><br><span class="line"></span><br><span class="line"><span class="comment"># 禁止root账户登陆</span></span><br><span class="line">sed -i <span class="string">'/PermitRootLogin/cPermitRootLogin yes'</span> /etc/ssh/sshd_config</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭密码登陆，使用密钥登陆</span></span><br><span class="line">sed -i <span class="string">'/^PasswordAuthentication/cPasswordAuthentication no'</span> /etc/ssh/sshd_config</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解决登陆慢的问题</span></span><br><span class="line">sed -i <span class="string">'/^GSSAPIAuthentication/cGSSAPIAuthentication no'</span> /etc/ssh/sshd_config</span><br><span class="line">sed -i <span class="string">'/^UseDNS/cUseDNS no'</span> /etc/ssh/sshd_config</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启生效</span></span><br><span class="line">service sshd restart</span><br><span class="line">systemctl restart sshd</span><br><span class="line"></span><br><span class="line"><span class="comment">#--------------------------------------------------系统优化--------------------------------------------------</span></span><br><span class="line"><span class="comment"># 修改限制：/etc/security/limits.conf</span></span><br><span class="line">cat &gt;&gt;/etc/security/limits.conf&lt;&lt;EOF</span><br><span class="line">*        soft    core        unlimited</span><br><span class="line">*        hard    core        unlimited</span><br><span class="line">*        soft    data        unlimited</span><br><span class="line">*        hard    data        unlimited</span><br><span class="line">*        soft    fsize       unlimited</span><br><span class="line">*        hard    fsize       unlimited</span><br><span class="line">*        soft    memlock     unlimited</span><br><span class="line">*        hard    memlock     unlimited</span><br><span class="line">*        soft    nofile      1024000</span><br><span class="line">*        hard    nofile      1024000</span><br><span class="line">*        soft    rss         unlimited</span><br><span class="line">*        hard    rss         unlimited</span><br><span class="line">*        soft    stack       unlimited</span><br><span class="line">*        hard    stack       unlimited</span><br><span class="line">*        soft    nproc       102400</span><br><span class="line">*        hard    nproc       102400</span><br><span class="line">*        soft    locks       unlimited</span><br><span class="line">*        hard    locks       unlimited</span><br><span class="line">*        soft    sigpending  unlimited</span><br><span class="line">*        hard    sigpending  unlimited</span><br><span class="line">*        soft    msgqueue    unlimited</span><br><span class="line">*        hard    msgqueue    unlimited</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment"># 优化内核参数</span></span><br><span class="line">cat &gt;&gt;/etc/sysctl.conf&lt;&lt;EOF</span><br><span class="line">net.ipv4.tcp_fin_timeout = 2</span><br><span class="line">net.ipv4.tcp_tw_reuse = 1</span><br><span class="line">net.ipv4.tcp_tw_recycle = 1</span><br><span class="line">net.ipv4.tcp_syncookies = 1</span><br><span class="line">net.ipv4.tcp_keepalive_time = 600</span><br><span class="line">net.ipv4.ip_local_port_range = 4000    65000</span><br><span class="line">net.ipv4.tcp_max_syn_backlog = 16384</span><br><span class="line">net.ipv4.tcp_max_tw_buckets = 36000</span><br><span class="line">net.ipv4.route.gc_timeout = 100</span><br><span class="line">net.ipv4.tcp_syn_retries = 1</span><br><span class="line">net.ipv4.tcp_synack_retries = 1</span><br><span class="line">net.core.somaxconn = 16384</span><br><span class="line">net.core.netdev_max_backlog = 16384</span><br><span class="line">net.ipv4.tcp_max_orphans = 16384</span><br><span class="line"><span class="comment"># 以下参数是对iptables防火墙的优化，防火墙不开会提示，可以忽略不理。</span></span><br><span class="line">net.nf_conntrack_max = 25000000</span><br><span class="line">net.netfilter.nf_conntrack_max = 25000000</span><br><span class="line">net.netfilter.nf_conntrack_tcp_timeout_established = 180</span><br><span class="line">net.netfilter.nf_conntrack_tcp_timeout_time_wait = 120</span><br><span class="line">net.netfilter.nf_conntrack_tcp_timeout_close_wait = 60</span><br><span class="line">net.netfilter.nf_conntrack_tcp_timeout_fin_wait = 120</span><br><span class="line">net.core.wmem_default = 8388608</span><br><span class="line">net.core.rmem_default = 8388608</span><br><span class="line">net.core.wmem_max = 16777216</span><br><span class="line">net.core.rmem_max = 16777216</span><br><span class="line">EOF</span><br><span class="line">sysctl -p</span><br><span class="line"></span><br><span class="line"><span class="comment">#--------------------------------------------------细节优化--------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 集群互信通信</span></span><br><span class="line"><span class="comment"># 创建密钥</span></span><br><span class="line">[[ -d ~/.ssh ]] || mkdir ~/.ssh</span><br><span class="line">ssh-keygen -qt rsa -P <span class="string">''</span> -f ~/.ssh/id_rsa</span><br><span class="line"></span><br><span class="line"><span class="comment"># 公钥添加到本机的授权文件</span></span><br><span class="line">cat ~/.ssh/id_rsa.pub &gt;&gt;~/.ssh/authorized_keys</span><br><span class="line">chmod 600 ~/.ssh/authorized_keys</span><br><span class="line"></span><br><span class="line"><span class="comment"># 分发密钥和授权文件</span></span><br><span class="line"><span class="keyword">for</span> host <span class="keyword">in</span> node&#123;2..9&#125;; <span class="keyword">do</span> scp -p ~/.ssh/&#123;id_rsa,authorized_keys&#125; <span class="variable">$&#123;host&#125;</span>:/root/.ssh;<span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 集群HOSTS文件解析</span></span><br><span class="line">cat &gt;&gt;/etc/hosts&lt;&lt;EOF</span><br><span class="line">172.16.0.101    node1</span><br><span class="line">172.16.0.102    node2</span><br><span class="line">172.16.0.103    node3</span><br><span class="line">172.16.0.104    node4</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="comment"># 升级系统</span></span><br><span class="line">yum -y update ; yum clean all</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将常用指令写入历史</span></span><br><span class="line"><span class="built_in">history</span> -c</span><br><span class="line">hostnamectl <span class="built_in">set</span>-hostname</span><br><span class="line">vi /etc/sysconfig/network</span><br><span class="line">vi /etc/hosts</span><br><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-</span><br><span class="line"></span><br><span class="line"><span class="comment"># CentOS 图形界面相关优化</span></span><br><span class="line">    </span><br><span class="line">分辨率修改：应用程序-系统工具-设备-显示-分辨率</span><br><span class="line"></span><br><span class="line">图标大小：主文件夹-框架栏上的三个横杠-点击缩小的按钮-50%</span><br></pre></td></tr></table></figure>
<h2 id="克隆模板机"><a href="#克隆模板机" class="headerlink" title="克隆模板机"></a>克隆模板机</h2><ul>
<li>基本步骤</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 克隆虚拟机</span></span><br><span class="line">    cp /kvm_data/centos7.5.qcow2 /kvm_data/centos7.5-1.qcow2</span><br><span class="line">    virsh dumpxml centos7.5 &gt; /etc/libvirt/qemu/centos7.5-1.xml</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编辑克隆主机配置：vim /etc/libvirt/qemu/centos7.5-1.xml 修改以下内容</span></span><br><span class="line">    &lt;name&gt;：     <span class="comment"># 虚拟机的名字</span></span><br><span class="line">    &lt;uuid&gt;：     <span class="comment"># 不重复的UUID</span></span><br><span class="line">    &lt;<span class="built_in">source</span>&gt;：   <span class="comment"># 主数据文件</span></span><br><span class="line">    &lt;mac&gt;：      <span class="comment"># 不重复的网卡mac地址</span></span><br><span class="line">    &lt;graphics&gt;： <span class="comment"># 修改vnc端口</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 导入克隆后的系统</span></span><br><span class="line">    virsh define /etc/libvirt/qemu/centos7.5-1.xml</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动克隆的虚拟机，并修改主机名</span></span><br><span class="line">    virsh start centos7.5-1</span><br><span class="line">    hostnamectl <span class="built_in">set</span>-hostname centos7.5-1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 为VNC设置密码：vim /etc/libvirt/qemu/centos7.5-1.xml 修改以下内容</span></span><br><span class="line">    &lt;graphics&gt;：增加 passwd=<span class="string">'123456'</span></span><br></pre></td></tr></table></figure>
<ul>
<li>自动化克隆脚本</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 模板域名称</span></span><br><span class="line">DOMINFO=centos7.5</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模板镜像文件</span></span><br><span class="line">TEMPLATE=/kvm_data/centos7.5.qcow2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 克隆个数</span></span><br><span class="line">NUMBER=2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 镜像存放目录，默认与模板路径相同</span></span><br><span class="line">DATAPATH=<span class="variable">$&#123;TEMPLATE%/*&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 模板机 VNC 端口</span></span><br><span class="line">VNCPORT=9527</span><br><span class="line"></span><br><span class="line"><span class="comment"># ---------------------------代码区---------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 检测镜像文件存在性</span></span><br><span class="line">[[ -f <span class="variable">$TEMPLATE</span> ]] || &#123; <span class="built_in">echo</span> <span class="string">"模板镜像文件不存在"</span> &amp;&amp; <span class="built_in">exit</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 基础文件名，请勿修改</span></span><br><span class="line">BASENAME=<span class="variable">$&#123;TEMPLATE##*/&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 自增端口</span></span><br><span class="line">CPORT=<span class="variable">$VNCPORT</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 复制镜像并克隆</span></span><br><span class="line"><span class="keyword">for</span> ((i=1;i&lt;=<span class="variable">$NUMBER</span>;i++)) ;<span class="keyword">do</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"开始克隆第<span class="variable">$&#123;i&#125;</span>台"</span></span><br><span class="line"></span><br><span class="line">    COPY=<span class="variable">$&#123;BASENAME/.qcow2/_$i.qcow2&#125;</span></span><br><span class="line">    cp -a <span class="variable">$TEMPLATE</span> <span class="variable">$DATAPATH</span>/<span class="variable">$COPY</span>;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"模板镜像复制完成"</span></span><br><span class="line"></span><br><span class="line">    COPYNAME=<span class="variable">$&#123;COPY##*/&#125;</span></span><br><span class="line">    XML=<span class="variable">$&#123;COPYNAME/qcow2/xml&#125;</span></span><br><span class="line">    virsh dumpxml <span class="variable">$DOMINFO</span> &gt; /etc/libvirt/qemu/<span class="variable">$XML</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"克隆虚拟机配置生成完成"</span></span><br><span class="line"></span><br><span class="line">    sed -i <span class="string">"/&lt;name&gt;/s/&gt;.*&lt;/&gt;<span class="variable">$XML</span>&lt;/"</span> /etc/libvirt/qemu/<span class="variable">$XML</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"克隆虚拟机域名称修改完成"</span></span><br><span class="line"></span><br><span class="line">    UUID=`uuidgen`</span><br><span class="line">    sed -i <span class="string">"/&lt;uuid&gt;/s/&gt;.*&lt;/&gt;<span class="variable">$UUID</span>&lt;/"</span> /etc/libvirt/qemu/<span class="variable">$XML</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"克隆虚拟机UUID修改完成"</span></span><br><span class="line"></span><br><span class="line">    sed -i <span class="string">"s/<span class="variable">$BASENAME</span>/<span class="variable">$COPY</span>/"</span> /etc/libvirt/qemu/<span class="variable">$XML</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"克隆虚拟机镜像路径修改完成"</span></span><br><span class="line"></span><br><span class="line">    MAC=<span class="string">"<span class="variable">$(hexdump -n3 -e'/3 "52:54:00" 3/1 ":%02X"' /dev/urandom)</span>"</span></span><br><span class="line">    sed -i <span class="string">"/&lt;mac address/s/'.*'/'<span class="variable">$MAC</span>'/"</span> /etc/libvirt/qemu/<span class="variable">$XML</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"克隆虚拟机网卡MAC地址修改完成"</span></span><br><span class="line"></span><br><span class="line">    sed -i <span class="string">"/vnc/s/port='<span class="variable">$VNCPORT</span>'/port='<span class="variable">$((++CPORT)</span>)'/"</span> /etc/libvirt/qemu/<span class="variable">$XML</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"设置VNC端口完成"</span></span><br><span class="line"></span><br><span class="line">    PASSWD=`date +%N`</span><br><span class="line">    sed -i <span class="string">"/'vnc'/s/'vnc'/&amp; passwd='<span class="variable">$PASSWD</span>'/"</span> /etc/libvirt/qemu/<span class="variable">$XML</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"设置VNC密码完成"</span></span><br><span class="line"></span><br><span class="line">    virsh define /etc/libvirt/qemu/<span class="variable">$XML</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"注册克隆虚拟机完成"</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    域名称: <span class="variable">$COPYNAME</span></span></span><br><span class="line"><span class="string">    镜像文件：<span class="variable">$DATAPATH</span>/<span class="variable">$COPY</span></span></span><br><span class="line"><span class="string">    配置文件：/etc/libvirt/qemu/<span class="variable">$XML</span></span></span><br><span class="line"><span class="string">    UUID：<span class="variable">$UUID</span></span></span><br><span class="line"><span class="string">    网卡地址：<span class="variable">$MAC</span></span></span><br><span class="line"><span class="string">    VNC端口：<span class="variable">$CPORT</span></span></span><br><span class="line"><span class="string">    VNC密码：<span class="variable">$PASSWD</span></span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    "</span>&gt;&gt;alonekvm.log</span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"克隆<span class="variable">$&#123;NUMBER&#125;</span>台虚拟机完成"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"请逐个启动虚拟机，并修改主机名称"</span></span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://yangjinheng.github.io/2018/07/14/web/jQuery/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jin Heng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="默默">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/14/web/jQuery/" itemprop="url">jQuery学习笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-14T21:56:00+08:00">
                2018-07-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index">
                    <span itemprop="name">web</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h1><blockquote>
<p>内容整理自：<a href="http://jquery.cuishifeng.cn/index.html" target="_blank" rel="noopener">http://jquery.cuishifeng.cn/index.html</a></p>
</blockquote>
<h2 id="版本选择"><a href="#版本选择" class="headerlink" title="版本选择"></a>版本选择</h2><ul>
<li>版本有1.xx.x、2.xx.x、3.xx.x</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1.xx.x 它对 IE 的兼容性较好，一般选择这个最新版本</span><br><span class="line">2.xx.x 对 IE 的兼容性较差</span><br><span class="line">3.xx.x 更差但提供了更强的功能</span><br></pre></td></tr></table></figure>
<ul>
<li>官网：<a href="http://code.jquery.com/" target="_blank" rel="noopener">http://code.jquery.com/</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">每个版本又分为两个子版本：</span><br><span class="line">uncompressed  未压缩</span><br><span class="line">minified      已压缩，适合嵌入网页</span><br></pre></td></tr></table></figure>
<h2 id="引入方法"><a href="#引入方法" class="headerlink" title="引入方法"></a>引入方法</h2><ul>
<li>在 HTML 内引入</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"jquery-1.12.4.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="调用方式"><a href="#调用方式" class="headerlink" title="调用方式"></a>调用方式</h2><p>使用 <code>jQuery. 或 $.</code> 来调用 jQuery 的功能</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"jquery-1.12.4.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">    jQuery.</span><br><span class="line"><span class="javascript">    $.</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="对象转换"><a href="#对象转换" class="headerlink" title="对象转换"></a>对象转换</h2><ul>
<li>jQuery 对象转换为 DOM 对象</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"i1"</span>&gt;</span> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">$("#i1").                     <span class="comment">&lt;!--获得 jQuery 对象--&gt;</span></span><br><span class="line">$("#i1")[0]                   <span class="comment">&lt;!--转换 jQuery 对象为 DOM 对象--&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>DOM 对象转换为 jQuery 对象</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"i1"</span>&gt;</span> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">var x = document.getElementById("i1")</span><br><span class="line">$(x)                                  <span class="comment">&lt;!--转换 DOM 对象为 jQuery 对象--&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="扩展方法"><a href="#扩展方法" class="headerlink" title="扩展方法"></a>扩展方法</h2><ul>
<li>方法一，使用 <code>extend</code> 附加一个 <code>{&#39;test&#39;:func(){}}</code> 字典形式的对象</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$.extend(&#123;</span><br><span class="line">    'test':function() &#123;</span><br><span class="line">		return 'test';</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">var v = $.test();</span><br><span class="line">alert(v);</span><br></pre></td></tr></table></figure>
<ul>
<li>方法二</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$.fn.extend(&#123;</span><br><span class="line">    'test':function() &#123;</span><br><span class="line">        return 'test';</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">var v = $('#i1').test();</span><br><span class="line">alert(v);</span><br></pre></td></tr></table></figure>
<ul>
<li>编写 jQuery 扩展文件，test.js</li>
</ul>
<p>在文件内使用自执行函数能防止多个 jQuery 模块间全局变量名冲突的问题。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">(function (args) &#123;</span><br><span class="line">	var status = 1;</span><br><span class="line">	args.entend(</span><br><span class="line">        'test':function()&#123;</span><br><span class="line">			return 'test';</span><br><span class="line">        &#125;</span><br><span class="line">	)</span><br><span class="line">&#125;)(jQuery);</span><br></pre></td></tr></table></figure>
<ul>
<li>使用自己编写的 jQuery 扩展文件</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"jquery-1.12.4.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"test.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">var v = $.test();</span><br><span class="line">alert(v);</span><br></pre></td></tr></table></figure>
<h1 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h1><h2 id="基本选择器"><a href="#基本选择器" class="headerlink" title="基本选择器"></a>基本选择器</h2><h3 id="id-选择器"><a href="#id-选择器" class="headerlink" title="id 选择器"></a>id 选择器</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"i1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$(&apos;#i1&apos;)</span><br><span class="line">jQuery.fn.init &#123;context: document, selector: &quot;#i1&quot;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="class-选择器"><a href="#class-选择器" class="headerlink" title="class 选择器"></a>class 选择器</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"c1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">$(".c1")</span><br></pre></td></tr></table></figure>
<h3 id="标签选择器"><a href="#标签选择器" class="headerlink" title="标签选择器"></a>标签选择器</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$(&apos;a&apos;)</span><br><span class="line">jQuery.fn.init(4) [a, a, a, a, prevObject: jQuery.fn.init(1), context: document, selector: &quot;a&quot;]</span><br></pre></td></tr></table></figure>
<h3 id="组合选择器"><a href="#组合选择器" class="headerlink" title="组合选择器"></a>组合选择器</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"i1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"c1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$(&apos;#i1,.c1,a&apos;)</span><br><span class="line">jQuery.fn.init(6) [div#i1, div.c1, a, a, a, a, prevObject: jQuery.fn.init(1), context: document, selector: &quot;#i1,.c1,a&quot;]</span><br></pre></td></tr></table></figure>
<h2 id="层级选择器"><a href="#层级选择器" class="headerlink" title="层级选择器"></a>层级选择器</h2><h3 id="递归选择"><a href="#递归选择" class="headerlink" title="递归选择"></a>递归选择</h3><ul>
<li>查找某个标签下的指定标签，例如：查找 <code>i1</code> 标签下的所有 <code>a</code> 标签</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"i1"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"i2"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$(&apos;#i1 a&apos;)</span><br><span class="line">jQuery.fn.init(4) [a, a, a, a, prevObject: jQuery.fn.init(1), context: document, selector: &quot;#i1 a&quot;]</span><br></pre></td></tr></table></figure>
<h3 id="仅子标签"><a href="#仅子标签" class="headerlink" title="仅子标签"></a>仅子标签</h3><ul>
<li>只查找子标签，孙子标签不找</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"i1"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"i2"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$('#i1 &gt; a')</span><br><span class="line">jQuery.fn.init(2) [a, a, prevObject: jQuery.fn.init(1), context: document, selector: "#i1 &gt; a"]</span><br></pre></td></tr></table></figure>
<h3 id="下一个标签"><a href="#下一个标签" class="headerlink" title="下一个标签"></a>下一个标签</h3><ul>
<li>下一个标签</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"i1"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"i2"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"i3"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$(&apos;#i1 + div&apos;)</span><br><span class="line">jQuery.fn.init [div#i2, prevObject: jQuery.fn.init(1), context: document, selector: &quot;#i1 + div&quot;]</span><br><span class="line"></span><br><span class="line">$(&apos;#i2 + div&apos;)</span><br><span class="line">jQuery.fn.init [div#i3, prevObject: jQuery.fn.init(1), context: document, selector: &quot;#i2 + div&quot;]</span><br></pre></td></tr></table></figure>
<h3 id="后面兄弟标签"><a href="#后面兄弟标签" class="headerlink" title="后面兄弟标签"></a>后面兄弟标签</h3><ul>
<li>查找自己后面的兄弟标签们</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"i1"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"i2"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"i3"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$('#i1 ~ div')</span><br><span class="line">jQuery.fn.init(2) [div#i2, div#i3, prevObject: jQuery.fn.init(1), context: document, selector: "#i1 ~ div"]</span><br></pre></td></tr></table></figure>
<h2 id="基本筛选器"><a href="#基本筛选器" class="headerlink" title="基本筛选器"></a>基本筛选器</h2><h3 id="首尾选择"><a href="#首尾选择" class="headerlink" title="首尾选择"></a>首尾选择</h3><ul>
<li>这里使用了组合查找，first 找到第一个匹配的标签，last 找到最后一个匹配的标签</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"i1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c1"</span>&gt;</span>list item 1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c2"</span>&gt;</span>list item 2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c3"</span>&gt;</span>list item 3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c4"</span>&gt;</span>list item 4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c5"</span>&gt;</span>list item 5<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"i2"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c1"</span>&gt;</span>list item 1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c2"</span>&gt;</span>list item 2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c3"</span>&gt;</span>list item 3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c4"</span>&gt;</span>list item 4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c5"</span>&gt;</span>list item 5<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$('#i1 li:first')</span><br><span class="line">jQuery.fn.init [li, prevObject: jQuery.fn.init(1), context: document, selector: "#i1 li:first"]</span><br><span class="line"></span><br><span class="line">$('#i1 li:last')</span><br><span class="line">jQuery.fn.init [li, prevObject: jQuery.fn.init(1), context: document, selector: "#i1 li:last"]</span><br></pre></td></tr></table></figure>
<h3 id="不匹配选择"><a href="#不匹配选择" class="headerlink" title="不匹配选择"></a>不匹配选择</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"apple"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"flower"</span> <span class="attr">checked</span>=<span class="string">"checked"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$('input:not(":checked")')</span><br><span class="line">jQuery.fn.init [input.c1, prevObject: jQuery.fn.init(1), context: document, selector: "input:not(":checked")"]</span><br><span class="line"></span><br><span class="line">$('input').not(':checked')</span><br><span class="line">jQuery.fn.init [input.c1, prevObject: jQuery.fn.init(2), context: document]</span><br></pre></td></tr></table></figure>
<h3 id="奇偶选择"><a href="#奇偶选择" class="headerlink" title="奇偶选择"></a>奇偶选择</h3><ul>
<li>even 选择奇数标签、odd 选择偶数标签</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"i1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c1"</span>&gt;</span>list item 1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c2"</span>&gt;</span>list item 2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c3"</span>&gt;</span>list item 3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c4"</span>&gt;</span>list item 4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c5"</span>&gt;</span>list item 5<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$('#i1&gt;li:odd')</span><br><span class="line">jQuery.fn.init(2) [li.c2, li.c4, prevObject: jQuery.fn.init(1), context: document, selector: "#i1&gt;li:odd"]</span><br><span class="line"></span><br><span class="line">$('#i1&gt;li:even')</span><br><span class="line">jQuery.fn.init(3) [li.c1, li.c3, li.c5, prevObject: jQuery.fn.init(1), context: document, selector: "#i1&gt;li:even"]</span><br></pre></td></tr></table></figure>
<h3 id="索引选择"><a href="#索引选择" class="headerlink" title="索引选择"></a>索引选择</h3><ul>
<li>这个方法从0开始选择，等于这个索引的匹配标签</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"i1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c1"</span>&gt;</span>list item 1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c2"</span>&gt;</span>list item 2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c3"</span>&gt;</span>list item 3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c4"</span>&gt;</span>list item 4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c5"</span>&gt;</span>list item 5<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$('#i1&gt;li:eq(0)')</span><br><span class="line">jQuery.fn.init [li.c1, prevObject: jQuery.fn.init(1), context: document, selector: "#i1&gt;li:eq(0)"]</span><br><span class="line"></span><br><span class="line">$('#i1&gt;li:eq(1)')</span><br><span class="line">jQuery.fn.init [li.c2, prevObject: jQuery.fn.init(1), context: document, selector: "#i1&gt;li:eq(1)"]</span><br></pre></td></tr></table></figure>
<h3 id="比较选择"><a href="#比较选择" class="headerlink" title="比较选择"></a>比较选择</h3><ul>
<li>gt 索引大于，lt 索引小于</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"i1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c1"</span>&gt;</span>list item 1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c2"</span>&gt;</span>list item 2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c3"</span>&gt;</span>list item 3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c4"</span>&gt;</span>list item 4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c5"</span>&gt;</span>list item 5<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$('#i1&gt;li:lt(2)')</span><br><span class="line">jQuery.fn.init(2) [li.c1, li.c2, prevObject: jQuery.fn.init(1), context: document, selector: "#i1&gt;li:lt(2)"]</span><br><span class="line"></span><br><span class="line">$('#i1&gt;li:gt(2)')</span><br><span class="line">jQuery.fn.init(2) [li.c4, li.c5, prevObject: jQuery.fn.init(1), context: document, selector: "#i1&gt;li:gt(2)"]</span><br></pre></td></tr></table></figure>
<h3 id="标题选择"><a href="#标题选择" class="headerlink" title="标题选择"></a>标题选择</h3><ul>
<li>:header 选择所有的 h 标签</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>1<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>2<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>3<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$(&quot;:header&quot;).css(&quot;background&quot;, &quot;#EEEE&quot;);</span><br><span class="line">jQuery.fn.init(3) [h1, h2, h3, prevObject: jQuery.fn.init(1), context: document, selector: &quot;:header&quot;]</span><br><span class="line"></span><br><span class="line">$(&quot;:header:first&quot;).css(&quot;background&quot;, &quot;red&quot;);</span><br><span class="line">jQuery.fn.init [h1, prevObject: jQuery.fn.init(1), context: document, selector: &quot;:header:first&quot;]</span><br><span class="line"></span><br><span class="line">$(&quot;:header:eq(2)&quot;).css(&quot;background&quot;, &quot;red&quot;);</span><br><span class="line">jQuery.fn.init [h3, prevObject: jQuery.fn.init(1), context: document, selector: &quot;:header:eq(2)&quot;]</span><br></pre></td></tr></table></figure>
<h2 id="内容选择器TODO"><a href="#内容选择器TODO" class="headerlink" title="内容选择器TODO"></a>内容选择器TODO</h2><h2 id="可见性TODO"><a href="#可见性TODO" class="headerlink" title="可见性TODO"></a>可见性TODO</h2><h2 id="属性选择"><a href="#属性选择" class="headerlink" title="属性选择"></a>属性选择</h2><ul>
<li>找到所有具有该属性的标签，可用的模式有：</li>
</ul>
<p><code>[attribute] [attribute=value] [attribute!=value] [attribute^=value] [attribute$=value] [attribute*=value] [attrSel1] [attrSel2] [attrSelN]</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"i1"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c1"</span> <span class="attr">yang</span>=<span class="string">'jinheng'</span>&gt;</span>list item 1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c2"</span> <span class="attr">yang</span>=<span class="string">'zhongxiao'</span>&gt;</span>list item 2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c3"</span>&gt;</span>list item 3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c4"</span>&gt;</span>list item 4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c5"</span> <span class="attr">yang</span>=<span class="string">'yanjun'</span>&gt;</span>list item 5<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$('[yang]')</span><br><span class="line">jQuery.fn.init(3) [li.c1, li.c2, li.c5, prevObject: jQuery.fn.init(1), context: document, selector: "[yang]"]</span><br><span class="line"></span><br><span class="line">$('[yang="jinheng"]')</span><br><span class="line">jQuery.fn.init [li.c1, prevObject: jQuery.fn.init(1), context: document, selector: "[yang="jinheng"]"]</span><br><span class="line"></span><br><span class="line">$('li[yang="jinheng"]')</span><br><span class="line">jQuery.fn.init [li.c1, prevObject: jQuery.fn.init(1), context: document, selector: "li[yang="jinheng"]"]</span><br></pre></td></tr></table></figure>
<h2 id="表单选择"><a href="#表单选择" class="headerlink" title="表单选择"></a>表单选择</h2><ul>
<li>匹配不同的表单类型</li>
</ul>
<p>可以使用的有：<code>:input :text :password :radio :checkbox :submit :image :reset :button :file</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"c1"</span> <span class="attr">type</span>=<span class="string">"text"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"c2"</span> <span class="attr">type</span>=<span class="string">"password"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"c3"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"按钮"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$(':text')</span><br><span class="line">jQuery.fn.init [input.c1, prevObject: jQuery.fn.init(1), context: document, selector: ":text"]</span><br><span class="line"></span><br><span class="line">$(':password')</span><br><span class="line">jQuery.fn.init [input.c2, prevObject: jQuery.fn.init(1), context: document, selector: ":password"]</span><br><span class="line"></span><br><span class="line">$(':button')</span><br><span class="line">jQuery.fn.init [input.c3, prevObject: jQuery.fn.init(1), context: document, selector: ":button"]</span><br></pre></td></tr></table></figure>
<h2 id="表单对象属性"><a href="#表单对象属性" class="headerlink" title="表单对象属性"></a>表单对象属性</h2><p>可用的有：<code>:enabled :disabled :checked :selected</code></p>
<ul>
<li>使能选择器</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"c1"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">disabled</span>=<span class="string">"disabled"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"c1"</span> <span class="attr">type</span>=<span class="string">"text"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"c3"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"按钮"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$(':disabled')</span><br><span class="line">jQuery.fn.init [input.c1, prevObject: jQuery.fn.init(1), context: document, selector: ":disabled"]</span><br><span class="line"></span><br><span class="line">$(':enabled')</span><br><span class="line">jQuery.fn.init(2) [input.c1, input.c3, prevObject: jQuery.fn.init(1), context: document, selector: ":enabled"]</span><br></pre></td></tr></table></figure>
<ul>
<li>默认选择器</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">class</span>=<span class="string">"c1"</span> <span class="attr">value</span>=<span class="string">"1"</span>&gt;</span>Flowers<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">class</span>=<span class="string">"c2"</span> <span class="attr">value</span>=<span class="string">"2"</span> <span class="attr">selected</span>=<span class="string">"selected"</span>&gt;</span>Gardens<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">class</span>=<span class="string">"c3"</span> <span class="attr">value</span>=<span class="string">"3"</span>&gt;</span>Trees<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$(':selected')</span><br><span class="line">jQuery.fn.init [option.c2, prevObject: jQuery.fn.init(1), context: document, selector: ":selected"]</span><br></pre></td></tr></table></figure>
<h1 id="筛选器"><a href="#筛选器" class="headerlink" title="筛选器"></a>筛选器</h1><h2 id="过滤"><a href="#过滤" class="headerlink" title="过滤"></a>过滤</h2><table>
<thead>
<tr>
<th>方法</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>eq(index OR -index)</code></td>
<td>索引匹配</td>
</tr>
<tr>
<td><code>first()</code></td>
<td>第一个</td>
</tr>
<tr>
<td><code>last()</code></td>
<td>最后一个</td>
</tr>
<tr>
<td><code>hasClass(class)</code></td>
<td>样式匹配</td>
</tr>
<tr>
<td><code>filter(expr OR obj OR ele OR fn)</code></td>
<td>过滤符合条件的</td>
</tr>
<tr>
<td><code>is(expr OR obj OR ele OR fn)</code></td>
<td>条件判断</td>
</tr>
<tr>
<td><code>map(callback)</code></td>
<td>将一组元素转换成其他数组（不论是否是元素数组）</td>
</tr>
<tr>
<td><code>has(expr OR ele)</code></td>
<td>保留包含特定后代的元素，去掉那些不含有指定后代的元素。</td>
</tr>
<tr>
<td><code>not(expr OR ele OR fn)</code></td>
<td>不匹配某些元素</td>
</tr>
<tr>
<td><code>slice(start,[end])</code></td>
<td>匹配切片</td>
</tr>
</tbody>
</table>
<h3 id="测试用例"><a href="#测试用例" class="headerlink" title="测试用例"></a>测试用例</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"i1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c1"</span>&gt;</span>list item 1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c2"</span>&gt;</span>list item 2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c3"</span>&gt;</span>list item 3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c4"</span>&gt;</span>list item 4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"c5"</span>&gt;</span>list item 5<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="索引匹配"><a href="#索引匹配" class="headerlink" title="索引匹配"></a>索引匹配</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$('[class]').eq(0)</span><br><span class="line">jQuery.fn.init [li.c1, prevObject: jQuery.fn.init(5), context: document]</span><br><span class="line"></span><br><span class="line">$('[class]').eq(1)</span><br><span class="line">jQuery.fn.init [li.c2, prevObject: jQuery.fn.init(5), context: document]</span><br><span class="line"></span><br><span class="line">$('[class]').eq(-3)</span><br><span class="line">jQuery.fn.init [li.c3, prevObject: jQuery.fn.init(5), context: document]</span><br></pre></td></tr></table></figure>
<h3 id="首尾选择-1"><a href="#首尾选择-1" class="headerlink" title="首尾选择"></a>首尾选择</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$('[class]').first()</span><br><span class="line">jQuery.fn.init [li.c1, prevObject: jQuery.fn.init(5), context: document]</span><br><span class="line"></span><br><span class="line">$('[class]').last()</span><br><span class="line">jQuery.fn.init [li.c5, prevObject: jQuery.fn.init(5), context: document]</span><br></pre></td></tr></table></figure>
<h3 id="样式检测"><a href="#样式检测" class="headerlink" title="样式检测"></a>样式检测</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$('[class]').last().hasClass('c5')</span><br><span class="line">true</span><br></pre></td></tr></table></figure>
<h3 id="过滤选择"><a href="#过滤选择" class="headerlink" title="过滤选择"></a>过滤选择</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$('[class]').filter('.c2')</span><br><span class="line">jQuery.fn.init [li.c2, prevObject: jQuery.fn.init(5), context: document]</span><br></pre></td></tr></table></figure>
<h3 id="标签判断"><a href="#标签判断" class="headerlink" title="标签判断"></a>标签判断</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$('[class]').is('li')</span><br><span class="line">true</span><br></pre></td></tr></table></figure>
<h3 id="不匹配选择-1"><a href="#不匹配选择-1" class="headerlink" title="不匹配选择"></a>不匹配选择</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$(&apos;[class]&apos;).not(&apos;.c3&apos;)</span><br><span class="line">jQuery.fn.init(4) [li.c1, li.c2, li.c4, li.c5, prevObject: jQuery.fn.init(5), context: document]</span><br></pre></td></tr></table></figure>
<h3 id="切片选择"><a href="#切片选择" class="headerlink" title="切片选择"></a>切片选择</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$('[class]').slice(1,3)</span><br><span class="line">jQuery.fn.init(2) [li.c2, li.c3, prevObject: jQuery.fn.init(5), context: document]</span><br></pre></td></tr></table></figure>
<h2 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h2><table>
<thead>
<tr>
<th><code>方法</code></th>
<th><code>作用</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>next([expr])</code></td>
<td><code>下一个标签</code></td>
</tr>
<tr>
<td><code>nextAll([expr])</code></td>
<td><code>下面全部标签</code></td>
</tr>
<tr>
<td><code>prev([expr])</code></td>
<td><code>上一个标签</code></td>
</tr>
<tr>
<td><code>prevAll([expr])</code></td>
<td><code>上面全部的标签</code></td>
</tr>
<tr>
<td><code>siblings([expr])</code></td>
<td><code>全部兄弟标签</code></td>
</tr>
<tr>
<td><code>children([expr])</code></td>
<td><code>孩子标签</code></td>
</tr>
<tr>
<td><code>nextUntil(e OR e)</code></td>
<td><code>查找当前元素之后的同辈元素，直到遇到匹配 () 内的元素则停止</code></td>
</tr>
<tr>
<td><code>prevUntil(e OR e)</code></td>
<td><code>查找当前元素之前的同辈元素，直到遇到匹配 () 内的元素则停止</code></td>
</tr>
<tr>
<td><code>parent([expr])</code></td>
<td><code>父标签</code></td>
</tr>
<tr>
<td><code>parents([expr])</code></td>
<td><code>找到当前元素的父元素们</code></td>
</tr>
<tr>
<td><code>offsetParent()</code></td>
<td><code>返回父元素中第一个样式内 position 属性设为 relative 或者 absolute 的元素</code></td>
</tr>
<tr>
<td><code>parentsUntil(e OR e)</code></td>
<td><code>查找当前元素的父辈标签，直到遇到匹配 () 内的标签则停止</code></td>
</tr>
<tr>
<td><code>closest(e OR o OR e)</code></td>
<td><code>从当前元素逐级向上匹配标签，返回最先匹配到的标签</code></td>
</tr>
<tr>
<td><code>find(e OR o OR e)</code></td>
<td><code>递归查找标签</code></td>
</tr>
</tbody>
</table>
<ul>
<li>抽屉样式的文章选择，被点击的文章会显示，其他文章会隐藏</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"jquery-1.12.4.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.header</span> &#123;</span></span><br><span class="line">            background-color: black;</span><br><span class="line">            color: white;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.content</span> &#123;</span></span><br><span class="line">            min-height: 50px;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.hide</span> &#123;</span></span><br><span class="line">            display: none;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"height: 400px; width: 200px;border: 1px solid #eeeeee;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span>标题一<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span>标题二<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content hide"</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span>标题三<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content hide"</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">'.header'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">// 把自己的下一个元素的 hide 取消</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// 在自己父元素的同辈元素下查找 class 属性为 '.content' 的元素将其设置为隐藏</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// $(this).next().removeClass('hide');</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// $(this).parent().siblings().find('.content').addClass('hide')</span></span></span><br><span class="line"><span class="javascript">            $(<span class="keyword">this</span>).next().removeClass(<span class="string">'hide'</span>).parent().siblings().find(<span class="string">'.content'</span>).addClass(<span class="string">'hide'</span>)</span></span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="对象访问"><a href="#对象访问" class="headerlink" title="对象访问"></a>对象访问</h1><h2 id="each循环"><a href="#each循环" class="headerlink" title="each循环"></a>each循环</h2><ul>
<li>以每一个匹配的元素作为上下文来执行一个函数。</li>
</ul>
<p>意味着，每次执行传递进来的函数时，函数中的this关键字都指向一个不同的DOM元素（每次都是一个不同的匹配元素）。而且，在每次执行函数时，都会给函数传递一个表示作为执行环境的元素在匹配的元素集合中所处位置的数字值作为参数（从零开始的整型）。 返回 ‘false’ 将停止循环 (就像在普通的循环中使用 ‘break’)。返回 ‘true’ 跳至下一个循环(就像在普通的循环中使用’continue’)。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"点击"</span> <span class="attr">onclick</span>=<span class="string">"show();"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $(<span class="string">':text'</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">this</span>.value = <span class="string">'这是第'</span> +  i + <span class="string">'个输入框'</span></span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>实现全选、反选、取消的功能</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"1"</span> <span class="attr">id</span>=<span class="string">"t1"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>选项<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>IP<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>端口<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> /&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>192.168.0.1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>80<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> /&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>192.168.0.1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>80<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> /&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>192.168.0.1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>80<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"全选"</span> <span class="attr">onclick</span>=<span class="string">"checkAll();"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"反选"</span> <span class="attr">onclick</span>=<span class="string">"reverseALL();"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"取消"</span> <span class="attr">onclick</span>=<span class="string">"cancleAll();"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">checkAll</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $(<span class="string">'#t1 :checkbox'</span>).prop(<span class="string">'checked'</span>,<span class="literal">true</span>);</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">cancleAll</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $(<span class="string">'#t1 :checkbox'</span>).prop(<span class="string">'checked'</span>,<span class="literal">false</span>);</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">reverseALL</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $(<span class="string">'#t1 :checkbox'</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params">k</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">// if (this.checked) &#123;</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//     this.checked = false;</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// &#125; else &#123;</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//     this.checked = true;</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// &#125;</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// if ($(this).prop('checked')) &#123;</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//     $(this).prop('checked',false)</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// &#125; else &#123;</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//     $(this).prop('checked',true)</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// &#125;</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// var v = $(this).prop('checked') ? false : true</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// $(this).prop('checked',v)</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> v = <span class="keyword">this</span>.checked ? <span class="literal">false</span> : <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">this</span>.checked = v</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="对象长度"><a href="#对象长度" class="headerlink" title="对象长度"></a>对象长度</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$(':text').length</span><br><span class="line">4</span><br></pre></td></tr></table></figure>
<h2 id="元素位置"><a href="#元素位置" class="headerlink" title="元素位置"></a>元素位置</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$(this).index();</span><br></pre></td></tr></table></figure>
<h1 id="元素属性"><a href="#元素属性" class="headerlink" title="元素属性"></a>元素属性</h1><h2 id="属性增删"><a href="#属性增删" class="headerlink" title="属性增删"></a>属性增删</h2><h3 id="读取设置属性"><a href="#读取设置属性" class="headerlink" title="读取设置属性"></a>读取设置属性</h3><ul>
<li>如果对象是一个元素集合，就获取第一个元素的属性，或者设置每一个元素的属性</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$('a').attr('href','https://baidu.com')</span><br><span class="line"></span><br><span class="line">$('a').attr('href')</span><br><span class="line">"https://baidu.com"</span><br></pre></td></tr></table></figure>
<h3 id="删除内置属性"><a href="#删除内置属性" class="headerlink" title="删除内置属性"></a>删除内置属性</h3><ul>
<li>removeAttr 用于删除属性</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$('a').removeAttr('href')</span><br><span class="line">jQuery.fn.init [a, prevObject: jQuery.fn.init(1), context: document, selector: "a"]</span><br><span class="line"></span><br><span class="line">$('a').attr('href')</span><br><span class="line">undefined</span><br></pre></td></tr></table></figure>
<h3 id="设置内置属性"><a href="#设置内置属性" class="headerlink" title="设置内置属性"></a>设置内置属性</h3><ul>
<li>如果对象是一个元素集合，就获取第一个元素的属性，或者设置每一个元素的属性</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span>请选择性别：<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>男：<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">value</span>=<span class="string">"M"</span> <span class="attr">checked</span>=<span class="string">"checked"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>女：<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"gender"</span> <span class="attr">value</span>=<span class="string">"F"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$(':radio[value="M"]').prop('checked',true)</span><br><span class="line">jQuery.fn.init [input, prevObject: jQuery.fn.init(1), context: document, selector: ":radio[value="M"]"]</span><br><span class="line"></span><br><span class="line">$(':radio[value="F"]').prop('checked',true)</span><br><span class="line">jQuery.fn.init [input, prevObject: jQuery.fn.init(1), context: document, selector: ":radio[value="F"]"]</span><br></pre></td></tr></table></figure>
<h3 id="删除内置属性-1"><a href="#删除内置属性-1" class="headerlink" title="删除内置属性"></a>删除内置属性</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://baidu.com"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$(':radio[value="F"]').removeProp('checked')</span><br><span class="line">jQuery.fn.init [input, prevObject: jQuery.fn.init(1), context: document, selector: ":radio[value="F"]"]</span><br></pre></td></tr></table></figure>
<h3 id="适用场景"><a href="#适用场景" class="headerlink" title="适用场景"></a>适用场景</h3><p>根据官方的建议：具有 <code>true</code> 和 <code>false</code> 两个属性的属性，如 <code>checked、selected、disabled</code> 使用 <code>prop()</code>，其他的使用 <code>attr()</code> ，以前我们使用 <code>attr()</code> 获取 <code>checked</code> 属性时返回 <code>checked</code> 和 <code>&quot;&quot;</code> ，现在使用 <code>prop()</code> 方法获取属性则统一返回 <code>true</code> 和 <code>false</code></p>
<table>
<thead>
<tr>
<th>Attribute/Property</th>
<th>.attr()</th>
<th>.prop()</th>
</tr>
</thead>
<tbody>
<tr>
<td>accesskey</td>
<td>√</td>
<td></td>
</tr>
<tr>
<td>align</td>
<td>√</td>
<td></td>
</tr>
<tr>
<td>async</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td>autofocus</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td>checked</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td>class</td>
<td>√</td>
<td></td>
</tr>
<tr>
<td>contenteditable</td>
<td>√</td>
<td></td>
</tr>
<tr>
<td>draggable</td>
<td>√</td>
<td></td>
</tr>
<tr>
<td>href</td>
<td>√</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>√</td>
<td></td>
</tr>
<tr>
<td>label</td>
<td>√</td>
<td></td>
</tr>
<tr>
<td>location ( i.e. window.location )</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td>multiple</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td>readOnly</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td>rel</td>
<td>√</td>
<td></td>
</tr>
<tr>
<td>selected</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td>src</td>
<td>√</td>
<td></td>
</tr>
<tr>
<td>tabindex</td>
<td>√</td>
<td></td>
</tr>
<tr>
<td>title</td>
<td>√</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>√</td>
<td></td>
</tr>
<tr>
<td>width ( if needed over .width() )</td>
<td>√</td>
</tr>
</tbody>
</table>
<h2 id="Class增删"><a href="#Class增删" class="headerlink" title="Class增删"></a>Class增删</h2><h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><table>
<thead>
<tr>
<th>方法</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>addClass(class OR fn)</code></td>
<td>添加一个class</td>
</tr>
<tr>
<td><code>removeClass([class OR fn])</code></td>
<td>移除一个class</td>
</tr>
<tr>
<td><code>toggleClass(class OR fn[,sw])</code></td>
<td>如果存在（不存在）就删除（添加）一个类， 可以实现切换的效果</td>
</tr>
</tbody>
</table>
<h2 id="元素内容"><a href="#元素内容" class="headerlink" title="元素内容"></a>元素内容</h2><h3 id="基本使用-1"><a href="#基本使用-1" class="headerlink" title="基本使用"></a>基本使用</h3><table>
<thead>
<tr>
<th>方法</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>html([val OR fn])</code></td>
<td>取得元素的HTML内容</td>
</tr>
<tr>
<td><code>text([val OR fn])</code></td>
<td>取得元素的文本内容</td>
</tr>
<tr>
<td><code>val([val OR fn OR arr])</code></td>
<td>取得元素的值</td>
</tr>
</tbody>
</table>
<h3 id="测试用例-1"><a href="#测试用例-1" class="headerlink" title="测试用例"></a>测试用例</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="读取设置HTML内容"><a href="#读取设置HTML内容" class="headerlink" title="读取设置HTML内容"></a>读取设置HTML内容</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$('a').html()</span><br><span class="line">"TEST"</span><br><span class="line"></span><br><span class="line">$('a').html('<span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"background-color: red"</span>&gt;</span>这里的HTML代码将被浏览器设别<span class="tag">&lt;/<span class="name">div</span>&gt;</span>')</span><br><span class="line">jQuery.fn.init [a, prevObject: jQuery.fn.init(1), context: document, selector: "a"]</span><br></pre></td></tr></table></figure>
<h3 id="读取设置文本内容"><a href="#读取设置文本内容" class="headerlink" title="读取设置文本内容"></a>读取设置文本内容</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$('a').text('<span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"background-color: red"</span>&gt;</span>这里的HTML代码浏览器识别为普通文本<span class="tag">&lt;/<span class="name">div</span>&gt;</span>')</span><br><span class="line">jQuery.fn.init [a, prevObject: jQuery.fn.init(1), context: document, selector: "a"]</span><br></pre></td></tr></table></figure>
<h3 id="读取设置元素的值"><a href="#读取设置元素的值" class="headerlink" title="读取设置元素的值"></a>读取设置元素的值</h3><ul>
<li>在 jQuery 1.2 中,可以返回任意元素的值了。包括select。如果多选，将返回一个数组，其包含所选的值。</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">"TEXT"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$('input').val()</span><br><span class="line">"TEXT"</span><br><span class="line"></span><br><span class="line">$('input').val('NEW TEST')</span><br><span class="line">jQuery.fn.init [input, prevObject: jQuery.fn.init(1), context: document, selector: "input"]</span><br></pre></td></tr></table></figure>
<h1 id="文档处理"><a href="#文档处理" class="headerlink" title="文档处理"></a>文档处理</h1><h2 id="标签内部"><a href="#标签内部" class="headerlink" title="标签内部"></a>标签内部</h2><table>
<thead>
<tr>
<th>方法</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>append(content OR fn)</code></td>
<td>在文档内的尾部追加元素</td>
</tr>
<tr>
<td><code>prepend(content OR fn)</code></td>
<td>在文档内的头部插入元素</td>
</tr>
<tr>
<td><code>appendTo(content)</code></td>
<td>把元素追加到文档内尾部</td>
</tr>
<tr>
<td><code>prependTo(content)</code></td>
<td>把元素插入到文档内头部</td>
</tr>
</tbody>
</table>
<ul>
<li>append，会在列表的尾部追加一个新的元素</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"t1"</span> <span class="attr">type</span>=<span class="string">"text"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"a1"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"添加"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"u1"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">'#a1'</span>).click(</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> v = $(<span class="string">'#t1'</span>).val();</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> temp = <span class="string">"&lt;li&gt;"</span> + v + <span class="string">"&lt;/li&gt;"</span>;</span></span><br><span class="line"><span class="javascript">                $(<span class="string">'#u1'</span>).append(temp);</span></span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>prepend，会在列表的头部插入一个新的元素</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"t1"</span> <span class="attr">type</span>=<span class="string">"text"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"a1"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"添加"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"u1"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">'#a1'</span>).click(</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> v = $(<span class="string">'#t1'</span>).val();</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> temp = <span class="string">"&lt;li&gt;"</span> + v + <span class="string">"&lt;/li&gt;"</span>;</span></span><br><span class="line"><span class="javascript">                $(<span class="string">'#u1'</span>).prepend(temp);</span></span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>appendTo，会把所有的 <code>&lt;p&gt;</code> 插追加到 所有的 <code>&lt;div&gt;</code> 内的尾部</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>I would like to say: <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$("p").appendTo("div");</span><br></pre></td></tr></table></figure>
<h2 id="标签外部"><a href="#标签外部" class="headerlink" title="标签外部"></a>标签外部</h2><table>
<thead>
<tr>
<th>方法</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>after(content OR fn)</code></td>
<td>在文档外的尾部追加元素</td>
</tr>
<tr>
<td><code>before(content OR fn)</code></td>
<td>在文档外的头部插入元素</td>
</tr>
<tr>
<td><code>insertAfter(content)</code></td>
<td>将元素插入到文档外的后面</td>
</tr>
<tr>
<td><code>insertBefore(content)</code></td>
<td>将元素插入到文档外的前面</td>
</tr>
</tbody>
</table>
<h2 id="标签删除"><a href="#标签删除" class="headerlink" title="标签删除"></a>标签删除</h2><table>
<thead>
<tr>
<th>方法</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>empty()</code></td>
<td>清空标签内容</td>
</tr>
<tr>
<td><code>remove([expr])</code></td>
<td>删除标签定义和内容</td>
</tr>
<tr>
<td><code>detach([expr])</code></td>
<td>TODO</td>
</tr>
</tbody>
</table>
<h2 id="标签克隆"><a href="#标签克隆" class="headerlink" title="标签克隆"></a>标签克隆</h2><table>
<thead>
<tr>
<th>方法</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>clone()</code></td>
<td>克隆一份标签</td>
</tr>
</tbody>
</table>
<ul>
<li>示例</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"l1"</span> <span class="attr">type</span>=<span class="string">"text"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"a1"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"添加"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"d1"</span> <span class="attr">type</span>=<span class="string">"text"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"a2"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"删除"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"a3"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"复制"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"u1"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>内容1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>内容2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">'#a1'</span>).click(</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> data = $(<span class="string">'&lt;li&gt;&lt;/li&gt;'</span>).append($(<span class="string">"#l1"</span>).val());</span></span><br><span class="line"><span class="javascript">                $(<span class="string">'#u1'</span>).append(data);</span></span><br><span class="line">            &#125;</span><br><span class="line">        );</span><br><span class="line"><span class="javascript">        $(<span class="string">'#a2'</span>).click(</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> index = $(<span class="string">'#d1'</span>).val() - <span class="number">1</span>;</span></span><br><span class="line"><span class="javascript">                $(<span class="string">'#u1 li'</span>).eq(index).remove();</span></span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line"><span class="javascript">        $(<span class="string">'#a3'</span>).click(</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> index = $(<span class="string">'#d1'</span>).val() - <span class="number">1</span>;</span></span><br><span class="line"><span class="javascript">                $(<span class="string">'#u1 li'</span>).eq(index).clone().appendTo($(<span class="string">'#u1'</span>))</span></span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="样式处理"><a href="#样式处理" class="headerlink" title="样式处理"></a>样式处理</h1><h2 id="样式"><a href="#样式" class="headerlink" title="样式"></a>样式</h2><table>
<thead>
<tr>
<th>方法</th>
<th><code>作用</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>css(name OR pro OR [,val OR fn])</code></td>
<td>增加CSS样式</td>
</tr>
</tbody>
</table>
<ul>
<li>增加样式</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$(tag).css('color','green');</span><br><span class="line">$(tag).css('position','absolute');</span><br></pre></td></tr></table></figure>
<h2 id="位置"><a href="#位置" class="headerlink" title="位置"></a>位置</h2><table>
<thead>
<tr>
<th>方法</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>offset([coordinates])</code></td>
<td>获取匹配元素在当前视口的相对偏移，就是元素在HTML的坐标。</td>
</tr>
<tr>
<td><code>position()</code></td>
<td>指定标签相对父标签 (有relative样式) 标签的坐标</td>
</tr>
<tr>
<td><code>scrollTop([val])</code></td>
<td>垂直的滚轮</td>
</tr>
<tr>
<td><code>scrollLeft([val])</code></td>
<td>水平的滚轮</td>
</tr>
</tbody>
</table>
<ul>
<li>获取标签的坐标</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$('#i2').offset()</span><br></pre></td></tr></table></figure>
<ul>
<li>浏览器的右侧滑轮位置</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$(window).scrollTop()</span><br><span class="line">$(window).scrollTop(100)   <span class="comment">&lt;!--赋值就是调整位置--&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>标签的滑轮位置</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$('div').scrollTop()</span><br><span class="line">$('div').scrollTop(100)    <span class="comment">&lt;!--赋值就是调整位置--&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="尺寸"><a href="#尺寸" class="headerlink" title="尺寸"></a>尺寸</h2><table>
<thead>
<tr>
<th>方法</th>
<th>属性</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>height([val OR fn])</code></td>
<td>获取标签的高度</td>
</tr>
<tr>
<td><code>width([val OR fn])</code></td>
<td>获取标签的宽度</td>
</tr>
<tr>
<td><code>innerHeight()</code></td>
<td>获取标签内部区域高度，边框 + 标签高度</td>
</tr>
<tr>
<td><code>innerWidth()</code></td>
<td>获取标签内部区域宽度，边框 + 标签宽度</td>
</tr>
<tr>
<td><code>outerHeight([options])</code></td>
<td>获取标签外部区域高度</td>
</tr>
<tr>
<td><code>outerWidth([options])</code></td>
<td>获取标签外部区域宽度</td>
</tr>
</tbody>
</table>
<h1 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h1><h2 id="事件列表"><a href="#事件列表" class="headerlink" title="事件列表"></a>事件列表</h2><table>
<thead>
<tr>
<th>方法</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>blur([[data],fn])</code></td>
<td>当元素失去焦点时发生 blur 事件。</td>
</tr>
<tr>
<td><code>change([[data],fn])</code></td>
<td>当元素的值发生改变时，会发生 change 事件。</td>
</tr>
<tr>
<td><code>click([[data],fn])</code></td>
<td>当点击元素时，会发生 click 事件。</td>
</tr>
<tr>
<td><code>dblclick([[data],fn])</code></td>
<td>当双击元素时，会发生 dblclick 事件。</td>
</tr>
<tr>
<td><code>focus([[data],fn])</code></td>
<td>当元素获得焦点时，发生 focus 事件。</td>
</tr>
<tr>
<td><code>focusin([data],fn)</code></td>
<td>当元素（或在其内的任意元素）获得焦点时发生 focusin 事件。</td>
</tr>
<tr>
<td><code>focusout([data],fn)</code></td>
<td>当元素（或在其内的任意元素）失去焦点时发生 focusout 事件。</td>
</tr>
<tr>
<td><code>keydown([[data],fn])</code></td>
<td>keydown() 方法触发 keydown 事件，或规定当发生 keydown 事件时运行的函数。</td>
</tr>
<tr>
<td><code>keypress([[data],fn])</code></td>
<td>keypress() 方法触发 keypress 事件，或规定当发生 keypress 事件时运行的函数。</td>
</tr>
<tr>
<td><code>keyup([[data],fn])</code></td>
<td>当键盘键被松开时发生 keyup 事件。</td>
</tr>
<tr>
<td><code>mousedown([[data],fn])</code></td>
<td>当鼠标指针移动到元素上方，并按下鼠标左键时，会发生 mousedown 事件。</td>
</tr>
<tr>
<td><code>mouseenter([[data],fn])</code></td>
<td>当鼠标指针穿过（进入）被选元素时，会发生 mouseenter 事件。</td>
</tr>
<tr>
<td><code>mouseleave([[data],fn])</code></td>
<td>当鼠标指针离开被选元素时，会发生 mouseleave 事件。</td>
</tr>
<tr>
<td><code>mousemove([[data],fn])</code></td>
<td>当鼠标指针在指定的元素中移动时，就会发生 mousemove 事件。</td>
</tr>
<tr>
<td><code>mouseout([[data],fn])</code></td>
<td>当鼠标指针离开被选元素时，会发生 mouseout 事件。</td>
</tr>
<tr>
<td><code>mouseover([[data],fn])</code></td>
<td>当鼠标指针位于元素上方时，会发生 mouseover 事件。</td>
</tr>
<tr>
<td><code>mouseup([[data],fn])</code></td>
<td>当鼠标指针移动到元素上方，并松开鼠标左键时，会发生 mouseup 事件。</td>
</tr>
<tr>
<td><code>resize([[data],fn])</code></td>
<td>当调整浏览器窗口大小时，发生 resize 事件。</td>
</tr>
<tr>
<td><code>scroll([[data],fn])</code></td>
<td>当用户滚动指定的元素时，会发生 scroll 事件。</td>
</tr>
<tr>
<td><code>select([[data],fn])</code></td>
<td>当 textarea 或文本类型的 input 元素中的文本被选择（标记）时，会发生 select 事件。</td>
</tr>
<tr>
<td><code>submit([[data],fn])</code></td>
<td>当提交表单时，会发生 submit 事件。</td>
</tr>
</tbody>
</table>
<h2 id="绑定方式"><a href="#绑定方式" class="headerlink" title="绑定方式"></a>绑定方式</h2><table>
<thead>
<tr>
<th>方法</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$(&#39;.c1&#39;).click()</code></td>
<td>为元素绑定事件</td>
</tr>
<tr>
<td><code>on(事件,[选择器],[函数参数],函数)</code></td>
<td>为元素绑定事件</td>
</tr>
<tr>
<td><code>off(事件,[选择器],[函数])</code></td>
<td>反绑定</td>
</tr>
<tr>
<td><code>delegate(&#39;选择器&#39;,[事件类型],[函数参数],函数)</code> 3.0-</td>
<td>为元素绑定事件，当有新元素时候，同样自动绑定</td>
</tr>
<tr>
<td><code>undelegate([选择器,[事件类型],函数])</code> 3.0-</td>
<td>反绑定</td>
</tr>
</tbody>
</table>
<h2 id="验证事件"><a href="#验证事件" class="headerlink" title="验证事件"></a>验证事件</h2><ul>
<li>DOM 绑定事件事使用 <code>return fun_name();</code> 如果函数返回 <code>false</code> 则会阻止标签默认行为</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.baidu.com"</span> <span class="attr">onclick</span>=<span class="string">"return clickon();"</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">clickon</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> <span class="literal">false</span>;    <span class="comment">// 此处可以验证用户名密码之类的操作，密码不对则不跳转。</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>jQuery 方式阻止标签默认行为只需要在函数内返回 <code>false</code> 即可。</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">"i1"</span> <span class="attr">href</span>=<span class="string">"http://www.baidu.com"</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">'#i1'</span>).click(</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>示例</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"jquery-1.12.4.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.error</span>&#123;</span></span><br><span class="line">        color: red;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"f1"</span> <span class="attr">action</span>=<span class="string">"http://www.baidu.com"</span> <span class="attr">method</span>=<span class="string">"POST"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"n1"</span> <span class="attr">type</span>=<span class="string">"text"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"n3"</span> <span class="attr">type</span>=<span class="string">"password"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"n2"</span> <span class="attr">type</span>=<span class="string">"text"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"n4"</span> <span class="attr">type</span>=<span class="string">"text"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"n5"</span> <span class="attr">type</span>=<span class="string">"text"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">':submit'</span>).click(</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                $(<span class="string">'.error'</span>).remove();</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> flag = <span class="literal">true</span>;</span></span><br><span class="line"><span class="javascript">                $(<span class="string">'#f1'</span>).find(<span class="string">'input[type="text"],input[type="password"]'</span>).each(</span></span><br><span class="line"><span class="javascript">                    <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                        <span class="keyword">var</span> v = $(<span class="keyword">this</span>).val();</span></span><br><span class="line">                        if (v.length &lt;= 0) &#123;</span><br><span class="line"><span class="javascript">                            flag = <span class="literal">false</span>;</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">var</span> tag = <span class="built_in">document</span>.createElement(<span class="string">'span'</span>);</span></span><br><span class="line"><span class="javascript">                            tag.className = <span class="string">'error'</span>;</span></span><br><span class="line"><span class="javascript">                            tag.innerHTML = <span class="string">'必填'</span>;</span></span><br><span class="line"><span class="javascript">                            $(<span class="keyword">this</span>).after(tag);</span></span><br><span class="line"><span class="javascript">                            <span class="comment">// return false;    // return 会跳出 each 循环，不再验证其他的输入框</span></span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                )</span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> flag;</span></span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>表单提交伪代码</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    $(<span class="string">':submit'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">':text,:password'</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> <span class="literal">false</span>;    <span class="comment">// 此处的 return 将打破 each 循环不再继续验证其他输入</span></span></span><br><span class="line">        &#125;)</span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="literal">false</span>;    <span class="comment">// 如果验证失败则阻止表单的默认提交动作的发生</span></span></span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>一般情况下，我们后绑定的事件会先执行，但对于 checkbox 默认事件会先执行。</p>
</blockquote>
<blockquote>
<p>在前端 js 内做一层简单的表单验证，后端服务器与数据库验证时候做 强验证，这能阻挡用户输入的一般性错误，同时能够减轻后端压力。</p>
</blockquote>
<h2 id="框架事件"><a href="#框架事件" class="headerlink" title="框架事件"></a>框架事件</h2><p>如果有的标签资源加载缓慢，例如图片资源，那么默认情况下，事件绑定是在所有标签渲染完毕后进行的，这造成了如果有一个图片没有加载完成，那么其他标签上的事件就不能得到绑定，解决这个问题的办法是在框架加载完成后立刻绑定事件，在 jQuery 中是将需要默认加载的函数放在 <code>$(function(){})</code> 的函数中，这样它就会在框架加载完成后就立刻执行绑定。</p>
<ul>
<li>当页面框架加载完成后，自动执行，把默认要执行的操作放入这个函数即可。</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$(function()&#123;</span><br><span class="line">	// 执行绑定的事件</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>例如：上面的例子就可以这样做。</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">':submit'</span>).click(</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                $(<span class="string">'.error'</span>).remove();</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> flag = <span class="literal">true</span>;</span></span><br><span class="line"><span class="javascript">                $(<span class="string">'#f1'</span>).find(<span class="string">'input[type="text"],input[type="password"]'</span>).each(</span></span><br><span class="line"><span class="javascript">                    <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                        <span class="keyword">var</span> v = $(<span class="keyword">this</span>).val();</span></span><br><span class="line">                        if (v.length &lt;= 0) &#123;</span><br><span class="line"><span class="javascript">                            flag = <span class="literal">false</span>;</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">var</span> tag = <span class="built_in">document</span>.createElement(<span class="string">'span'</span>);</span></span><br><span class="line"><span class="javascript">                            tag.className = <span class="string">'error'</span>;</span></span><br><span class="line"><span class="javascript">                            tag.innerHTML = <span class="string">'必填'</span>;</span></span><br><span class="line"><span class="javascript">                            $(<span class="keyword">this</span>).after(tag);</span></span><br><span class="line"><span class="javascript">                            <span class="comment">// return false;    // return 会跳出 each 循环，不再验证其他的输入框</span></span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                )</span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> flag;</span></span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>技巧，可以将表单验证功能封装，扩展成 jQuery 的方法，参见：基础知识 - 扩展方法。</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">$(function()&#123;</span><br><span class="line">	$.Login("#f1")</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h1 id="Ajax异步"><a href="#Ajax异步" class="headerlink" title="Ajax异步"></a>Ajax异步</h1><h2 id="jQuery-Ajax"><a href="#jQuery-Ajax" class="headerlink" title="jQuery Ajax"></a>jQuery Ajax</h2><h3 id="发送Ajax请求"><a href="#发送Ajax请求" class="headerlink" title="发送Ajax请求"></a>发送Ajax请求</h3><ul>
<li>发送 ajax 请求，success 是回调函数，一旦执行成功，得到的数据会当作参数传递给。</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">    url: <span class="string">'/index.html'</span>,           <span class="comment">// 请求的地址</span></span><br><span class="line">    type: <span class="string">'GET'</span>,                  <span class="comment">// 请求的方法类型</span></span><br><span class="line">    data: &#123;<span class="string">'k1'</span>:<span class="string">'v1'</span>&#125;,            <span class="comment">// 请求的数据</span></span><br><span class="line">    success: <span class="function"><span class="keyword">function</span>(<span class="params">args</span>) </span>&#123;     <span class="comment">// 请求成功得到结果时候回调函数</span></span><br><span class="line">    	<span class="built_in">console</span>.log(args)         <span class="comment">// 请求得到的数据被传递到 args 参数中</span></span><br><span class="line">	&#125;</span><br><span class="line">    error: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;             <span class="comment">// 请求没有得到结果的时候执行的回调函数</span></span><br><span class="line">    	<span class="built_in">console</span>.log(<span class="string">'error'</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="提交数组的处理"><a href="#提交数组的处理" class="headerlink" title="提交数组的处理"></a>提交数组的处理</h3><ul>
<li>ajax 提交一个数组</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">'#test_Ajax_list'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> values = $(<span class="string">'#sel'</span>).val()        <span class="comment">// 得到多选框的数组值</span></span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url: <span class="string">'/test_ajax_list/'</span>,</span><br><span class="line">        type: <span class="string">'POST'</span>,</span><br><span class="line">        data: &#123;<span class="string">'k'</span>:values&#125;,             <span class="comment">// 发送多选项的数组值</span></span><br><span class="line">        traditional: <span class="literal">true</span>,              <span class="comment">// 启用发送数组的支持</span></span><br><span class="line">        success: <span class="function"><span class="keyword">function</span> (<span class="params">args</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(args);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>view 函数</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_ajax_list</span><span class="params">(request)</span>:</span></span><br><span class="line">    print(request.POST.getlist(<span class="string">'k'</span>))    // 使用 getlist 获得 ajax 提交的数组</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">'ok'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="回调数据序列化"><a href="#回调数据序列化" class="headerlink" title="回调数据序列化"></a>回调数据序列化</h3><ul>
<li>直接将回调数据转换为 JSON 格式。</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">    url: <span class="string">'https://baidu.com'</span>,</span><br><span class="line">    type: <span class="string">'GET'</span>,</span><br><span class="line">    data: &#123;<span class="string">'k1'</span>:<span class="string">'v1'</span>&#125;,  <span class="comment">// 其中 value 不能是对象，可以是数组，如果需要传字典则需要JSON.stringify()转换</span></span><br><span class="line">    dataType: <span class="string">'JSON'</span>,   <span class="comment">// 可用类型有：xml、html、json、test、jsonp</span></span><br><span class="line">    success: <span class="function"><span class="keyword">function</span> (<span class="params">args</span>) </span>&#123;</span><br><span class="line">        args       <span class="comment">// 启用 dataType: 'JSON' 这个选项后，jQuery 会直接把回调得到的数据转换为 JSON 格式</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>javascript JSON 格式小知识</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">data = &#123;<span class="string">'k1'</span>,<span class="string">'v1'</span>&#125;</span><br><span class="line"></span><br><span class="line">将一个对象转换为字符串</span><br><span class="line">    <span class="built_in">JSON</span>.stringify(data)</span><br><span class="line"></span><br><span class="line">将一个字符串转换为对象</span><br><span class="line">    <span class="built_in">JSON</span>.parse(json_sting)</span><br></pre></td></tr></table></figure>
<h3 id="提交表单序列化"><a href="#提交表单序列化" class="headerlink" title="提交表单序列化"></a>提交表单序列化</h3><ul>
<li>提交 Form 表单到 URL，<code>.serialize()</code> 方法可以将 Form 表单数据序列化，直接可以传递后台。</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">    url: <span class="string">'http://baidu.com'</span>,</span><br><span class="line">    data: $(<span class="string">'#form_table'</span>).serialize(),</span><br><span class="line">    success: <span class="function"><span class="keyword">function</span>(<span class="params">args</span>)</span>&#123;</span><br><span class="line">        consolog.log(args)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="事件委托"><a href="#事件委托" class="headerlink" title="事件委托"></a>事件委托</h3><p>有一种情况，用户发送一个 <code>ajax</code> 提交到后台，后台为数据库增加了一条数据，但由于 <code>ajax</code> 的特性页面不会刷新，我们需要程序刷新页面或者直接操作HTML为页面增加一个元素，这又涉及一个问题，由于页面不刷新，新增的元素没有绑定相应的时间，于是乎，这就引出一点：事件委托，将一个事件委托给需要事件的父辈元素，当事件发生，立刻执行绑定并执行事件函数。</p>
<ul>
<li>事件委托，会在用户点击元素后，才立刻给元素绑定事件，并立刻执行，一般用于委托的元素内有新增的元素需要绑定事件。</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">'#tb'</span>).on(<span class="string">'click'</span>,<span class="string">'.del_row'</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">// 在父元素'#tb'委托'click'事件，当事件发生，立刻为'.del_row' 元素绑定并执行 function 函数</span></span><br><span class="line">	$(<span class="string">'#delModal'</span>).modal(<span class="string">'show'</span>);</span><br><span class="line">	<span class="keyword">var</span> rowid = $(<span class="keyword">this</span>).parent().parent().attr(<span class="string">'nid'</span>);</span><br><span class="line">	$(<span class="string">'#delNid'</span>).val(rowid);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>  委托事件应该绑定到需要绑定事件的元素，的父辈以上的元素上。如：委托事件绑定在整个表格上，当表格个指定元素的事件发生，则立刻绑定事件，并且执行事件。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">'要绑定标签的上级标签'</span>).on(<span class="string">'事件'</span>,<span class="string">'要绑定的标签'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;)            <span class="comment">// jQuery 3.x</span></span><br><span class="line">$(<span class="string">'要绑定标签的上级标签'</span>).delegate(<span class="string">'要绑定的标签'</span>,<span class="string">'事件'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;)      <span class="comment">// jQuery 1.x</span></span><br></pre></td></tr></table></figure>
<h3 id="模态框和新页面"><a href="#模态框和新页面" class="headerlink" title="模态框和新页面"></a>模态框和新页面</h3><ul>
<li>新页面方式适用</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1.独立的页面</span><br><span class="line">2.页面本身比较大，例如新的文章</span><br><span class="line">3.数据条目比较多，例如：有十几个以上的文本输入，选择等</span><br></pre></td></tr></table></figure>
<ul>
<li>模态对话框</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1.数据量较小</span><br><span class="line">2.数据条目较小</span><br><span class="line">3.必须要考虑不刷新页面为页面增加内容时应该增加在何处，考虑页码的问题，以及新增元素 如 td 的属性是否一致。</span><br><span class="line">4.实现第三条很费力，建议直接调用刷新页面</span><br></pre></td></tr></table></figure>
<ul>
<li>删除框</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">直接使用模态对话框。Ajax，删除即可</span><br></pre></td></tr></table></figure>
<h2 id="原生-Ajax"><a href="#原生-Ajax" class="headerlink" title="原生 Ajax"></a>原生 Ajax</h2><p>jQuery 的 Ajax 实现主要就是使用 <code>XmlHttpRequest</code> 对象来完成请求的操作，该对象在主流浏览器中均存在，在 IE 浏览器 IE5.5 中也已经存在（ActiveX控件），所以原生的 Ajax 兼容性较好， 在不能使用 jQuery 的场景下使用，例如：由于 jQuery 文件体积较大，需要网络流量较多，手机中不适合使用。</p>
<ul>
<li>创建对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br></pre></td></tr></table></figure>
<ul>
<li>监视状态</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">obj.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">	当 readyState 的值改变时自动触发执行其对应的函数（回调函数）</span><br></pre></td></tr></table></figure>
<ul>
<li>状态信息</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">obj.readyState</span><br><span class="line">    <span class="number">0</span>-未初始化，尚未调用open()方法；</span><br><span class="line">    <span class="number">1</span>-启动，调用了open()方法，未调用send()方法；</span><br><span class="line">    <span class="number">2</span>-发送，已经调用了send()方法，未接收到响应；</span><br><span class="line">    <span class="number">3</span>-接收，已经接收到部分响应数据；</span><br><span class="line">    <span class="number">4</span>-完成，已经接收到全部响应数据；</span><br></pre></td></tr></table></figure>
<ul>
<li>创建请求</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">open(method, url, <span class="keyword">async</span>, user=<span class="literal">null</span>, password=<span class="literal">null</span>)</span><br><span class="line">    method：请求方式（字符串类型），如：POST、GET、DELETE...</span><br><span class="line">    url：要请求的地址（字符串类型）</span><br><span class="line">    <span class="keyword">async</span>：是否异步（布尔类型）</span><br><span class="line">    user：用户名（字符串或空）</span><br><span class="line">    password：密码（字符串或空）</span><br></pre></td></tr></table></figure>
<ul>
<li>发送请求和数据</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">send(data)</span><br><span class="line">	body： 要发送的数据，可以是字符串类型</span><br></pre></td></tr></table></figure>
<ul>
<li>设置请求头</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">setRequestHeader(header, value)</span><br><span class="line">	header：请求头的 key（字符串类型）</span><br><span class="line">    value：请求头的 value（字符串类型）</span><br></pre></td></tr></table></figure>
<ul>
<li>获取响应头</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">getAllResponseHeaders()</span><br><span class="line">	获取所有的响应头</span><br><span class="line"></span><br><span class="line">getResponseHeader(header)</span><br><span class="line">	获取指定的响应头</span><br></pre></td></tr></table></figure>
<ul>
<li>终止请求</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">abort()</span><br></pre></td></tr></table></figure>
<ul>
<li>返回的数据</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">obj.responseText</span><br><span class="line">	返回的数据 text 类型</span><br><span class="line">    </span><br><span class="line">obj.responseXML</span><br><span class="line">	返回的数据 xml 类型</span><br><span class="line">    </span><br><span class="line">obj.status</span><br><span class="line">	返回的状态码</span><br><span class="line"></span><br><span class="line">obj.statusText</span><br><span class="line">	返回的状态描述信息</span><br></pre></td></tr></table></figure>
<h2 id="Ajax-提交数据"><a href="#Ajax-提交数据" class="headerlink" title="Ajax 提交数据"></a>Ajax 提交数据</h2><p>下面列举了 jQuery 和 原生 Ajax 发送GET和POST请求的使用方法</p>
<h3 id="Ajax-GET-提交"><a href="#Ajax-GET-提交" class="headerlink" title="Ajax GET 提交"></a>Ajax GET 提交</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;a onclick=<span class="string">"AjaxSubmit1();"</span>&gt;jQuery Ajax 请求&lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">    &lt;a onclick="AjaxSubmit2();"&gt;原生 Ajax 请求&lt;/</span>a&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">    function AjaxSubmit1() &#123;                     /</span><span class="regexp">/ jQuery Ajax 请求</span></span><br><span class="line"><span class="regexp">        $.ajax(&#123;</span></span><br><span class="line"><span class="regexp">            url: '/</span>ajax1.html/<span class="string">',</span></span><br><span class="line"><span class="string">            type: '</span>GET<span class="string">',</span></span><br><span class="line"><span class="string">            data: &#123;'</span>p<span class="string">': 123&#125;,</span></span><br><span class="line"><span class="string">            success: function (args) &#123;</span></span><br><span class="line"><span class="string">                console.log(args);</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;)</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    function AjaxSubmit2() &#123;                     // 原生 Ajax 请求</span></span><br><span class="line"><span class="string">        var xhr = new XMLHttpRequest();          // 创建 ajax 对象</span></span><br><span class="line"><span class="string">        xhr.onreadystatechange = function () &#123;   // readyState 改变时候执行函数</span></span><br><span class="line"><span class="string">            if (xhr.readyState == 4) &#123;           // 如果 readyState 为 4</span></span><br><span class="line"><span class="string">                console.log(xhr.responseText)    // 打印本次 ajax 请求返回的文本</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;;</span></span><br><span class="line"><span class="string">        xhr.open('</span>GET<span class="string">', '</span>/ajax1.html/?p=<span class="number">123</span><span class="string">');   // 创建请求</span></span><br><span class="line"><span class="string">        xhr.send(null);                          // 发送请求</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Ajax-POST-提交"><a href="#Ajax-POST-提交" class="headerlink" title="Ajax POST 提交"></a>Ajax POST 提交</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">onclick</span>=<span class="string">"AjaxSubmit3();"</span>&gt;</span>jQuery Ajax 请求<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">onclick</span>=<span class="string">"AjaxSubmit4();"</span>&gt;</span>原生 Ajax 请求<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">AjaxSubmit3</span>(<span class="params"></span>) </span>&#123;                     <span class="comment">// jQuery Ajax 请求</span></span></span><br><span class="line"><span class="javascript">        $.ajax(&#123;</span></span><br><span class="line"><span class="javascript">            url: <span class="string">'/ajax1.html/'</span>,</span></span><br><span class="line"><span class="javascript">            type: <span class="string">'POST'</span>,</span></span><br><span class="line"><span class="javascript">            data: &#123;<span class="string">'p'</span>: <span class="number">123</span>&#125;,</span></span><br><span class="line"><span class="javascript">            success: <span class="function"><span class="keyword">function</span> (<span class="params">args</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(args);</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">AjaxSubmit4</span>(<span class="params"></span>) </span>&#123;                     <span class="comment">// 原生 Ajax 请求</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();          <span class="comment">// 创建 ajax 对象</span></span></span><br><span class="line"><span class="javascript">        xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;   <span class="comment">// readyState 改变时候执行函数</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (xhr.readyState == <span class="number">4</span>) &#123;           <span class="comment">// 如果 readyState 为 4</span></span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(xhr.responseText)    <span class="comment">// 打印本次 ajax 请求返回的文本</span></span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"><span class="javascript">        xhr.open(<span class="string">'POST'</span>, <span class="string">'/ajax1.html/'</span>);        <span class="comment">// 创建请求</span></span></span><br><span class="line"><span class="javascript">        xhr.setRequestHeader(<span class="string">'Content-Type'</span>, <span class="string">'application/x-www-form-urlencoded; charset-UTF-8'</span>);  <span class="comment">// POST 数据时候必须设定的请求头</span></span></span><br><span class="line"><span class="javascript">        xhr.send(<span class="string">"p=456"</span>);                       <span class="comment">// 发送请求</span></span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>原生 Ajax 的相应需要转换</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Ajax</span>(<span class="params">method, url, callback, data</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">        xhr.open(method, url);</span><br><span class="line">        xhr.setRequestHeader(<span class="string">'Content-Type'</span>, <span class="string">'application/x-www-form-urlencoded'</span>);</span><br><span class="line">        xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (xhr.readyState == <span class="number">4</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> responseJson = <span class="built_in">JSON</span>.parse(xhr.responseText);</span><br><span class="line">                callback(responseJson);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        xhr.send(data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Ajax(<span class="string">'GET'</span>, <span class="string">'http://127.0.0.1:27017/data'</span>, func);</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="伪-Ajax-提交"><a href="#伪-Ajax-提交" class="headerlink" title="伪 Ajax 提交"></a>伪 Ajax 提交</h3><p>伪Ajax，利用 iframe 标签创建的通道，将 Form 表单通过这个通道提交，这种方式实现 Ajax 请求，这是最原始的方式，也是兼容性最好的。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">id</span>=<span class="string">"iframe"</span> <span class="attr">name</span>=<span class="string">"ifra"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span>                                <span class="comment">&lt;!--定义 iframe 通道，名字为：ifra --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"fmtb"</span> <span class="attr">action</span>=<span class="string">"/ajax1.html/"</span> <span class="attr">method</span>=<span class="string">"POST"</span> <span class="attr">target</span>=<span class="string">"ifra"</span>&gt;</span>       <span class="comment">&lt;!--表单使用 ifra 通道提交--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"p"</span> <span class="attr">value</span>=<span class="string">"456"</span>/&gt;</span>                            <span class="comment">&lt;!--提交的数据--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"btn"</span> <span class="attr">onclick</span>=<span class="string">"AjaxSubmit5();"</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">a</span>&gt;</span>                     <span class="comment">&lt;!--提交按钮--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">AjaxSubmit5</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.getElementById(<span class="string">'iframe'</span>).onload = reloadiframe;             <span class="comment">// 为通道绑定事件，当通道数据加载完成时候执行</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.getElementById(<span class="string">'fmtb'</span>).submit();                            <span class="comment">// 为表单提交按钮绑定提交事件</span></span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">reloadiframe</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> content = <span class="keyword">this</span>.contentWindow.document.body.innerHTML;            <span class="comment">// 取得 iframe 通道返回的数据内容</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> obj = <span class="built_in">JSON</span>.parse(content);                                       <span class="comment">// 转换为 JSON 格式</span></span></span><br><span class="line">        if (obj.status) &#123;</span><br><span class="line">            alert(obj.status);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="Ajax-上传文件"><a href="#Ajax-上传文件" class="headerlink" title="Ajax 上传文件"></a>Ajax 上传文件</h2><p>下面列举了使用 jQuery Ajax、原生Ajax、伪Ajax、向服务器提交数据的方法。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Ajax POST<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">id</span>=<span class="string">"img"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"btn"</span> <span class="attr">onclick</span>=<span class="string">"AjaxSubmit6();"</span>&gt;</span>jQuery Ajax 上传<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"btn"</span> <span class="attr">onclick</span>=<span class="string">"AjaxSubmit7();"</span>&gt;</span>原生 Ajax 上传<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>iframe form Ajax<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">style</span>=<span class="string">"display: none;"</span> <span class="attr">id</span>=<span class="string">"iframe2"</span> <span class="attr">name</span>=<span class="string">"ifra2"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span>             <span class="comment">&lt;!--使用 iframe + form 发送文件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"fm2"</span> <span class="attr">action</span>=<span class="string">"/ajax1.html/"</span> <span class="attr">method</span>=<span class="string">"POST"</span> <span class="attr">target</span>=<span class="string">"ifra2"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"p"</span> <span class="attr">value</span>=<span class="string">"456"</span>/&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"file"</span>/&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"btn"</span> <span class="attr">onclick</span>=<span class="string">"AjaxSubmit8();"</span>&gt;</span>iframe form 上传<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">AjaxSubmit6</span>(<span class="params"></span>) </span>&#123;                                         <span class="comment">// 使用 jQuery Ajax 发送文件</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> file = <span class="built_in">document</span>.getElementById(<span class="string">'img'</span>).files[<span class="number">0</span>];          <span class="comment">// 得到表单的文件数据</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> data = <span class="keyword">new</span> FormData();                                   <span class="comment">// 新建 FormData 对象</span></span></span><br><span class="line"><span class="javascript">        data.append(<span class="string">'k1'</span>,<span class="string">'v1'</span>);</span></span><br><span class="line"><span class="javascript">        data.append(<span class="string">'k2'</span>,<span class="string">'v2'</span>);</span></span><br><span class="line"><span class="javascript">        data.append(<span class="string">'k3'</span>,file);                                      <span class="comment">// 存入 FormData 对象</span></span></span><br><span class="line"><span class="javascript">        $.ajax(&#123;</span></span><br><span class="line"><span class="javascript">            url: <span class="string">'/ajax1.html/'</span>,</span></span><br><span class="line"><span class="javascript">            type: <span class="string">'POST'</span>,</span></span><br><span class="line">            data: data,</span><br><span class="line"><span class="javascript">            processData: <span class="literal">false</span>,</span></span><br><span class="line"><span class="javascript">            contentType: <span class="literal">false</span>,</span></span><br><span class="line"><span class="javascript">            success: <span class="function"><span class="keyword">function</span> (<span class="params">args</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(args)</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">AjaxSubmit7</span>(<span class="params"></span>) </span>&#123;                                         <span class="comment">// 使用 原生 Ajax 发送文件</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> file = <span class="built_in">document</span>.getElementById(<span class="string">'img'</span>).files[<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> data = <span class="keyword">new</span> FormData();                                   <span class="comment">// 新建 FormData 对象</span></span></span><br><span class="line"><span class="javascript">        data.append(<span class="string">'k1'</span>,<span class="string">'v1'</span>);</span></span><br><span class="line"><span class="javascript">        data.append(<span class="string">'k2'</span>,<span class="string">'v2'</span>);</span></span><br><span class="line"><span class="javascript">        data.append(<span class="string">'k3'</span>,file);                                      <span class="comment">// 存入 FormData 对象</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span></span><br><span class="line"><span class="javascript">        xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line">            if (xhr.readyState == 4) &#123;</span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(xhr.responseText)</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"><span class="javascript">        xhr.open(<span class="string">'POST'</span>, <span class="string">'/ajax1.html/'</span>);</span></span><br><span class="line">        xhr.send(data);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">AjaxSubmit8</span>(<span class="params"></span>) </span>&#123;                                         <span class="comment">// 使用 iframe + form 发送文件</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.getElementById(<span class="string">'iframe2'</span>).onload = reloadiframe2;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.getElementById(<span class="string">'fm2'</span>).submit();</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">reloadiframe2</span>(<span class="params"></span>) </span>&#123;                                        <span class="comment">// 得到服务器返回的数据</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> content = <span class="keyword">this</span>.contentWindow.document.body.innerHTML;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> obj = <span class="built_in">JSON</span>.parse(content);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(obj);</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>上传文件并显示</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/static/jquery-3.3.1.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>上传文件<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">style</span>=<span class="string">"display: none;"</span> <span class="attr">id</span>=<span class="string">"iframe"</span> <span class="attr">name</span>=<span class="string">"ifra"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"fm"</span> <span class="attr">action</span>=<span class="string">"/upload_img.html/"</span> <span class="attr">method</span>=<span class="string">"POST"</span> <span class="attr">target</span>=<span class="string">"ifra"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"file"</span> <span class="attr">onchange</span>=<span class="string">"uploadFile();"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>预览<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"preview"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">uploadFile</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.getElementById(<span class="string">'iframe'</span>).onload = reloadiframe;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.getElementById(<span class="string">'fm'</span>).submit();</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">reloadiframe</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> content = <span class="keyword">this</span>.contentWindow.document.body.innerHTML;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> obj = <span class="built_in">JSON</span>.parse(content);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(obj.data);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> tag = <span class="built_in">document</span>.createElement(<span class="string">'img'</span>); <span class="comment">// 创建一个 img 标签用作预览</span></span></span><br><span class="line"><span class="javascript">        tag.src = obj.data;                      <span class="comment">// 将服务器返回的文件路径放入创建的 img 标签的src属性内</span></span></span><br><span class="line"><span class="javascript">        $(<span class="string">'#preview'</span>).empty().append(tag)        <span class="comment">// 追加 img 标签到 预览标签内 </span></span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">-----------------settings.py-----------------</span><br><span class="line">MEDIA_ROOT = os.path.join(BASE_DIR, <span class="string">'uploads'</span>)        <span class="comment"># 设置媒体文件目录</span></span><br><span class="line">MEDIA_URL = <span class="string">'/uploads/'</span></span><br><span class="line"></span><br><span class="line">-----------------urls.py-----------------</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'admin/'</span>, admin.site.urls),</span><br><span class="line">    path(<span class="string">'upload.html/'</span>, views.upload),</span><br><span class="line">    path(<span class="string">'upload_img.html/'</span>, views.upload_img),</span><br><span class="line">] + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)</span><br><span class="line"></span><br><span class="line">-----------------wiews.py-----------------</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">upload</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">'upload.html'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> uuid</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">upload_img</span><span class="params">(request)</span>:</span></span><br><span class="line">    ret = &#123;<span class="string">'status'</span>: <span class="literal">True</span>, <span class="string">'data'</span>: <span class="literal">None</span>, <span class="string">'message'</span>: <span class="literal">None</span>&#125;    <span class="comment"># 构建相应报文</span></span><br><span class="line">    obj = request.FILES.get(<span class="string">'file'</span>)                          <span class="comment"># 得到用户上传的文件对象</span></span><br><span class="line">    nid = str(uuid.uuid4())                                  <span class="comment"># 生成随机文件名</span></span><br><span class="line">    file_path = <span class="string">'uploads/'</span> + nid + obj.name                  <span class="comment"># 在本地打开也文件</span></span><br><span class="line">    <span class="keyword">with</span> open(file_path, <span class="string">'wb'</span>) <span class="keyword">as</span> file:                      <span class="comment"># 将用户上传的文件写入到本地文件</span></span><br><span class="line">        <span class="keyword">for</span> chunk <span class="keyword">in</span> obj.chunks():</span><br><span class="line">            file.write(chunk)</span><br><span class="line">    ret[<span class="string">'data'</span>] = <span class="string">'/'</span> + file_path                            <span class="comment"># 更新响应报文的数据</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(json.dumps(ret))</span><br></pre></td></tr></table></figure>
<h2 id="JSONP规则"><a href="#JSONP规则" class="headerlink" title="JSONP规则"></a>JSONP规则</h2><h3 id="同源策略"><a href="#同源策略" class="headerlink" title="同源策略"></a>同源策略</h3><p>默认情况下，Ajax 的请求只能发往本网站，发往其他网站时候，其他网站响应包到达浏览器时候会被丢弃，这就是浏览器的同源策略。</p>
<h3 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h3><p>JSONP 是 JSON 的一种 “使用模式” ，可用于解决主流浏览器的跨域数据访问的问题，由于同源策略，一般请求的发送的地址如果不是本网站，会被浏览器禁止，而 <code>&lt;script&gt;</code> 元素是一个例外，利用 <code>&lt;script&gt;</code> 元素的这个开放策略，网页可以得到从其他来源动态产生的 <code>javascript</code> 资料，而这种使用模式就是所谓的 JSONP，这要求被请求的网站返回的必须是一个 <code>javascript</code> 代码。</p>
<p>因为 JSONP 的本质，所以它永远是GET请求的方式。</p>
<ul>
<li><code>http://127.0.0.1:8001/test.html</code> 地址</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">'func("内容来自：127.0.0.1:8001");'</span>)    <span class="comment"># 返回函数</span></span><br></pre></td></tr></table></figure>
<ul>
<li>请求 JSONP</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"content"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"发送"</span> <span class="attr">onclick</span>=<span class="string">"jsonp();"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">jsonp</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> tag = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);     <span class="comment">// 创建 script 标签</span></span></span><br><span class="line"><span class="javascript">        tag.src = <span class="string">'http://127.0.0.1:8001/test.html'</span>;    <span class="comment">// 向标签插入请求地址</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.head.appendChild(tag);                 <span class="comment">// 插入标签</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.head.removeChild(tag);                 <span class="comment">// 请求完成移除标签</span></span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">args</span>) </span>&#123;                               <span class="comment">// 被 script 标签执行</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.getElementById(<span class="string">'content'</span>).innerHTML = args;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="jQuery-JSONP"><a href="#jQuery-JSONP" class="headerlink" title="jQuery JSONP"></a>jQuery JSONP</h3><p>遵循JSONP规则的网站，一般都可以指定回调函数的函数名称。</p>
<ul>
<li><code>http://127.0.0.1:8001/test.html</code> 地址</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render,HttpResponse</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(request)</span>:</span></span><br><span class="line">    func = request.GET.get(<span class="string">'callback'</span>)</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">'%s("内容来自：127.0.0.1:8001");'</span> % (func))</span><br></pre></td></tr></table></figure>
<ul>
<li>请求 JSONP 数据的 Ajax</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/static/jquery-3.3.1.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"content"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"发送"</span> <span class="attr">onclick</span>=<span class="string">"jsonp();"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">jsonp</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        $.ajax(&#123;</span></span><br><span class="line"><span class="javascript">            url: <span class="string">'http://127.0.0.1:8001/test.html'</span>,    <span class="comment">// jsonp 地址</span></span></span><br><span class="line"><span class="javascript">            type: <span class="string">'GET'</span>,                               <span class="comment">// 此处只能为 GET，其他无效</span></span></span><br><span class="line"><span class="javascript">            dataType: <span class="string">'jsonp'</span>,                         <span class="comment">// 设置本次请求为 jsonp</span></span></span><br><span class="line"><span class="javascript">            jsonp: <span class="string">'callback'</span>,                         <span class="comment">// 指定 JSONP 的 GET请求加上 callback 参数</span></span></span><br><span class="line"><span class="javascript">            jsonpCallback: <span class="string">'list'</span>,                     <span class="comment">// 指定 callback 参数的值</span></span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">list</span>(<span class="params">args</span>) </span>&#123;                             <span class="comment">// jsonp 的回调函数</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(args);</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="CORS"><a href="#CORS" class="headerlink" title="CORS"></a>CORS</h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/20/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><span class="page-number current">21</span><a class="page-number" href="/page/22/">22</a><span class="space">&hellip;</span><a class="page-number" href="/page/43/">43</a><a class="extend next" rel="next" href="/page/22/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="Jin Heng">
            
              <p class="site-author-name" itemprop="name">Jin Heng</p>
              <p class="site-description motion-element" itemprop="description">越努力越幸运</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">86</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/yangjinheng" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:jinhengyang@foxmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          
        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 &mdash; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jin Heng</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  













  





  

  

  

  
  

  

  

  

</body>
</html>
