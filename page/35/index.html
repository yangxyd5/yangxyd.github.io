<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="越努力越幸运">
<meta property="og:type" content="website">
<meta property="og:title" content="默默">
<meta property="og:url" content="https://yangjinheng.github.io/page/35/index.html">
<meta property="og:site_name" content="默默">
<meta property="og:description" content="越努力越幸运">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="默默">
<meta name="twitter:description" content="越努力越幸运">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://yangjinheng.github.io/page/35/">





  <title>默默</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?be46574a10a6c2b7f67e9c32a008cbd5";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">默默</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-前端知识">
          <a href="/categories/web/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-asterisk"></i> <br>
            
            前端知识
          </a>
        </li>
      
        
        <li class="menu-item menu-item-kubernetes">
          <a href="/categories/Kubernetes/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-cog"></i> <br>
            
            Kubernetes
          </a>
        </li>
      
        
        <li class="menu-item menu-item-运维笔记">
          <a href="/categories/运维笔记/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>
            
            运维笔记
          </a>
        </li>
      
        
        <li class="menu-item menu-item-python">
          <a href="/categories/Python/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-laptop"></i> <br>
            
            Python
          </a>
        </li>
      
        
        <li class="menu-item menu-item-golang">
          <a href="/categories/golang/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br>
            
            Golang
          </a>
        </li>
      
        
        <li class="menu-item menu-item-个人日志">
          <a href="/categories/个人日志/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-github-alt"></i> <br>
            
            个人日志
          </a>
        </li>
      
        
        <li class="menu-item menu-item-guestbook">
          <a href="/guestbook" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            给我留言
          </a>
        </li>
      

      
    </ul>
  

  
</nav>


 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://yangjinheng.github.io/2017/09/23/python/14.argparse参数解析器/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jin Heng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="默默">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/23/python/14.argparse参数解析器/" itemprop="url">argparse参数解析器</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-23T00:00:00+08:00">
                2017-09-23
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Argparse简介"><a href="#Argparse简介" class="headerlink" title="Argparse简介"></a>Argparse简介</h2><ul>
<li><code>argparse</code> 是一个用于命令项选项与参数解析的模块</li>
<li>在程序中定义需要的参数和修饰，模块就会从 <code>sys.argv</code> 中解析出这些参数，不符合定义则抛出异常</li>
<li>它还可以根据定义自动生成命令行下 <code>-h</code> 帮助信息。</li>
</ul>
<h3 id="POSIX约定"><a href="#POSIX约定" class="headerlink" title="POSIX约定"></a>POSIX约定</h3><p>下面是POSIX标准中关于程序名、参数的约定：</p>
<ul>
<li>程序名不宜少于2个字符且不多于9个字符；</li>
<li>程序名应只包含小写字母和阿拉伯数字；</li>
<li>选项名应该是单字符活单数字，且以短横<code>-</code>为前綴；</li>
<li>多个不需要选项参数的选项，可以合并。例如：<code>foo -a -b -c</code> 可以合并书写为 <code>foo -abc</code></li>
<li>选项与其参数之间用空白符隔开；</li>
<li>选项参数不可选。</li>
<li>若选项参数有多值，要将其并为一个字串传进来。譬如：<code>myprog -u &quot;arnold,joe,jane&quot;</code>。这种情况下，需要自己解决这些参数的分离问题。</li>
<li>选项应该在操作数出现之前出现。</li>
<li>特殊参数<code>--</code>指明所有参数都结束了，其后任何参数都认为是操作数。</li>
<li>选项如何排列没有什么关系，但对互相排斥的选项，如果一个选项的操作结果覆盖其他选项的操作结果时，最后一个选项起作用；如果选项重复，则顺序处理。</li>
<li>允许操作数的顺序影响程序行为，但需要作文档说明。</li>
<li>读写指定文件的程序应该将单个参数’-‘作为有意义的标准输入或输出来对待。</li>
</ul>
<h3 id="GNU选项"><a href="#GNU选项" class="headerlink" title="GNU选项"></a>GNU选项</h3><p>GNU鼓励程序员使用–help、–verbose等形式的长选项。这些选项不仅不与POSIX约定冲突，而且容易记忆，另外也提供了在所有GNU工具之间保持一致性的机会。GNU长选项有自己的约定：</p>
<ul>
<li>对于已经遵循POSIX约定的GNU程序，每个短选项都有一个对应的长选项。</li>
<li>额外针对GNU的长选项不需要对应的短选项，仅仅推荐要有。</li>
<li>长选项可以缩写成保持惟一性的最短的字串。</li>
<li>选项参数与长选项之间或通过空白字符活通过一个’=’来分隔。</li>
<li>选项参数是可选的（只对短选项有效）。</li>
<li>长选项允许以一个短横线为前缀。</li>
</ul>
<h2 id="创建解析器"><a href="#创建解析器" class="headerlink" title="创建解析器"></a>创建解析器</h2><p><code>argparse.ArgumentParser()</code>是参数解析器的类，实例化它可以得到一个参数解析器，下面是实例化参数。</p>
<p>语法：<code>argparse.ArgumentParser(prog=None, usage=None, description=None, epilog=None, parents=[], formatter_class=&lt;class &#39;argparse.HelpFormatter&#39;&gt;, prefix_chars=&#39;-&#39;, fromfile_prefix_chars=None, argument_default=None, conflict_handler=&#39;error&#39;, add_help=True, allow_abbrev=True)</code></p>
<ul>
<li>创建解析器对象</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">10</span>]:  parser = argparse.ArgumentParser()</span><br></pre></td></tr></table></figure>
<ul>
<li>可用参数</li>
</ul>
<table>
<thead>
<tr>
<th>参数</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>prog</td>
<td>文件名，默认为 sys.argv[0]，用来在help信息中描述程序的名称</td>
</tr>
<tr>
<td>usage</td>
<td>描述程序用途的字符串</td>
</tr>
<tr>
<td>description</td>
<td>help 信息前显示的信息</td>
</tr>
<tr>
<td>epilog</td>
<td>help 信息之后显示的信息</td>
</tr>
<tr>
<td>parents</td>
<td>由 ArgumentParser 对象组成的列表，它们的 arguments 选项会被包含到新 ArgumentParser 对象中</td>
</tr>
<tr>
<td>formatter_class</td>
<td>help 信息输出的格式，为了美观…</td>
</tr>
<tr>
<td>prefix_chars</td>
<td>参数前缀，默认为 ‘-‘，（最好不要修改）</td>
</tr>
<tr>
<td>fromfile_prefix_chars</td>
<td>前缀字符，放在文件名之前</td>
</tr>
<tr>
<td>argument_default</td>
<td>设置一个全局的选项的缺省值，一般每个选项单独设置，基本没用</td>
</tr>
<tr>
<td>conflict_handler</td>
<td>解决冲突的策略，默认情况下冲突会发生错误，（最好不要修改）</td>
</tr>
<tr>
<td>add_help</td>
<td>是否增加 -h/-help 选项 (默认为True)，一般help信息都是必须的</td>
</tr>
<tr>
<td>allow_abbrev</td>
<td>允许长选项的缩写，默认为True</td>
</tr>
</tbody>
</table>
<h2 id="配置解析器"><a href="#配置解析器" class="headerlink" title="配置解析器"></a>配置解析器</h2><p>向参数解析器添加一个参数，和参数的一些修饰信息，决定了如何从命令行中解析这个参数。用法如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ArgumentParser.add_argument(name <span class="keyword">or</span> flags...</span><br><span class="line">                            [, action=<span class="string">'...'</span>]</span><br><span class="line">                            [, nargs=<span class="string">'...'</span>]</span><br><span class="line">                            [, const=<span class="string">'...'</span>]</span><br><span class="line">                            [, default=<span class="string">'...'</span>]</span><br><span class="line">                            [, type=<span class="string">'...'</span>]</span><br><span class="line">                            [, choices=<span class="string">'...'</span>]</span><br><span class="line">                            [, required=<span class="string">'...'</span>]</span><br><span class="line">                            [, help=<span class="string">'...'</span>]</span><br><span class="line">                            [, metavar=<span class="string">'...'</span>]</span><br><span class="line">                            [, dest=<span class="string">'...'</span>]</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<ul>
<li>name or flags：参数，分为两种</li>
</ul>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>位置参数，用引号括住的字符串，在程序中引用时候直接使用 <strong>参数解析器对象.参数名</strong> 形式引用</td>
</tr>
<tr>
<td>flags</td>
<td>可选参数，以 - 开头的字符串，–开头表示全称，在命令行传参时候，两种方式都可以。但在程序中引用时候需要使用   <strong>参数解析器对象.参数全称</strong> 形式引用</td>
</tr>
</tbody>
</table>
<blockquote>
<p> 位置参数：</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse    <span class="comment">#导入模块</span></span><br><span class="line">parser = argparse.ArgumentParser()    <span class="comment">#定义一个参数解析器对象</span></span><br><span class="line">parser.add_argument(<span class="string">'path'</span>)    <span class="comment">#定义一个位置参数</span></span><br><span class="line"></span><br><span class="line">args = parser.parse_args()    <span class="comment">#参数解析结果</span></span><br><span class="line">print(args)</span><br><span class="line">print(args.path)    <span class="comment">#打印某个参数接收到的值</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[python@localhost test]$ python args.py /etc/init.d/</span><br><span class="line">Namespace(path=<span class="string">'/etc/init.d/'</span>)</span><br><span class="line">/etc/init.d/</span><br></pre></td></tr></table></figure>
<blockquote>
<p>可选参数：</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line">parser.add_argument(<span class="string">'-p'</span>,<span class="string">'--path'</span>)</span><br><span class="line"></span><br><span class="line">args = parser.parse_args()</span><br><span class="line">print(args)</span><br><span class="line">print(args.path)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[python@localhost test]$ python args.py -p /etc/init.d/</span><br><span class="line">Namespace(path=<span class="string">'/etc/init.d/'</span>)</span><br><span class="line">/etc/init.d/</span><br></pre></td></tr></table></figure>
<ul>
<li>action：参数动作，表示从命令行接收到该参数时候如何处理，默认为 store。</li>
</ul>
<table>
<thead>
<tr>
<th>可用值</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>store</td>
<td>设置参数值为命令行获取到该参数后提供的子参数</td>
</tr>
<tr>
<td>store_const</td>
<td>如果命令行获取到该参数，则设置参数值为 const 所保存的值</td>
</tr>
<tr>
<td>store_true</td>
<td>如果命令行获取到该参数，则设置参数值为True</td>
</tr>
<tr>
<td>store_false</td>
<td>如果命令行获取到该参数，则设置参数值为False</td>
</tr>
<tr>
<td>append</td>
<td>将该参数后的提供的子参数放入列表，例如：test.py -s 1 -s 2 -s 3，收集为 s=[‘1’, ‘2’, ‘3’]</td>
</tr>
<tr>
<td>append_const</td>
<td>每从命令行获取到该参数一次，就将 const 所保存的值放入列表一次</td>
</tr>
<tr>
<td>count</td>
<td>如果命令行获取到该参数，则设置参数值为 参数出现的次数</td>
</tr>
<tr>
<td>version</td>
<td>如果命令行获取到该参数，则显示 version 所保存的值</td>
</tr>
</tbody>
</table>
<blockquote>
<p>定义一个可选参数</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line">parser.add_argument(<span class="string">'-p'</span>,<span class="string">'--path'</span>,action=<span class="string">'store_true'</span>)</span><br><span class="line"></span><br><span class="line">args = parser.parse_args()</span><br><span class="line">print(args)</span><br><span class="line">print(args.path)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[python@localhost test]$ python args.py -p</span><br><span class="line">Namespace(path=<span class="literal">True</span>)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line">[python@localhost test]$ python args.py </span><br><span class="line">Namespace(path=<span class="literal">False</span>)</span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure>
<ul>
<li>nargs：参数数量</li>
</ul>
<p>需要注意的是 <code>*、+、?</code> 需要用引号括起来，而数字不用。</p>
<table>
<thead>
<tr>
<th>符号</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>‘*’</td>
<td>0个或多个，可以没有</td>
</tr>
<tr>
<td>‘+’</td>
<td>1个或多个，至少有1个</td>
</tr>
<tr>
<td>‘?’</td>
<td>0个或1个，如果未能从命令行获得，则从 default 定义处获取。</td>
</tr>
<tr>
<td>N</td>
<td>N个，只接受这个数量的参数，多了少了都不行</td>
</tr>
</tbody>
</table>
<blockquote>
<p>有默认值的位置参数</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line">parser.add_argument(<span class="string">'path'</span>,nargs=<span class="string">'?'</span>,default=<span class="string">'.'</span>)</span><br><span class="line"></span><br><span class="line">args = parser.parse_args()</span><br><span class="line">print(args)</span><br><span class="line">print(args.path)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[python@localhost test]$ python args.py </span><br><span class="line">Namespace(path=<span class="string">'.'</span>)</span><br><span class="line">.</span><br><span class="line">[python@localhost test]$ python args.py /etc/init.d/</span><br><span class="line">Namespace(path=<span class="string">'/etc/init.d/'</span>)</span><br><span class="line">/etc/init.d/</span><br></pre></td></tr></table></figure>
<ul>
<li>choices：设置参数值的范围，如果 <code>choices</code> 中的类型不是字符串，记得指定 <code>type</code></li>
</ul>
<blockquote>
<p>可选值的位置参数</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line">parser.add_argument(<span class="string">'path'</span>,choices=(<span class="string">'/tmp'</span>,<span class="string">'/etc'</span>))</span><br><span class="line"></span><br><span class="line">args = parser.parse_args()</span><br><span class="line">print(args)</span><br><span class="line">print(args.path)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[python@localhost test]$ python args.py /etc</span><br><span class="line">Namespace(path=<span class="string">'/etc'</span>)</span><br><span class="line">/etc</span><br><span class="line">[python@localhost test]$ python args.py /opt</span><br><span class="line">usage: args.py [-h] &#123;/tmp,/etc&#125;</span><br><span class="line">args.py: error: argument path: invalid choice: <span class="string">'/opt'</span> (choose <span class="keyword">from</span> <span class="string">'/tmp'</span>, <span class="string">'/etc'</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>type：参数类型，默认为 <code>str</code></li>
<li>metavar：帮助信息中显示的参数名称</li>
<li>dest：可作为参数名，如果没有指定该参数则默认为选项名去掉前缀后作为参数名，对于位置参数无效</li>
<li>const：保存一个常量</li>
<li>default：参数的默认值</li>
<li>required：是否必选，只针对可选参数，对位置参数无效</li>
<li>version：保存版本信息</li>
<li>help： help 信息</li>
</ul>
<h2 id="其他方法"><a href="#其他方法" class="headerlink" title="其他方法"></a>其他方法</h2><p>.add_argument_group<br>.add_mutually_exclusive_group<br>.add_subparsers<br>.convert_arg_line_to_args<br>.error<br>.exit<br>.format_help<br>.format_usage<br>.get_default<br>.parse_args<br>.parse_known_args<br>.print_help<br>.print_usage<br>.register<br>.set_defaults<br>.print_help</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://yangjinheng.github.io/2017/09/22/python/13.pathlib和shutil/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jin Heng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="默默">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/22/python/13.pathlib和shutil/" itemprop="url">pathlib和shutil</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-22T00:00:00+08:00">
                2017-09-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="路径处理Path"><a href="#路径处理Path" class="headerlink" title="路径处理Path"></a>路径处理Path</h1><h2 id="模块的导入"><a href="#模块的导入" class="headerlink" title="模块的导入"></a>模块的导入</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line">p1 = Path(<span class="string">'/etc/rc.local'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="绝对路径-absolute"><a href="#绝对路径-absolute" class="headerlink" title="绝对路径.absolute"></a>绝对路径.absolute</h2><p>显示文件的绝对路径</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">245</span>]: p1 = Path(<span class="string">'sample.txt'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">247</span>]: p1.absolute()</span><br><span class="line">Out[<span class="number">247</span>]: PosixPath(<span class="string">'/home/python/magedu/projects/test/sample.txt'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="统一资源标识符-as-uri"><a href="#统一资源标识符-as-uri" class="headerlink" title="统一资源标识符.as_uri"></a>统一资源标识符.as_uri</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">39</span>]: p2 = Path(<span class="string">'/home/python/magedu/projects/test/sample.txt'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">42</span>]: p2.as_uri()</span><br><span class="line">Out[<span class="number">42</span>]: <span class="string">'file:///home/python/magedu/projects/test/sample.txt'</span></span><br></pre></td></tr></table></figure>
<h2 id="当前工作目录-cwd"><a href="#当前工作目录-cwd" class="headerlink" title="当前工作目录.cwd"></a>当前工作目录.cwd</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">111</span>]: p2</span><br><span class="line">Out[<span class="number">111</span>]: PosixPath(<span class="string">'/home/python/magedu/projects/test/sample.txt'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">112</span>]: p2.cwd()</span><br><span class="line">Out[<span class="number">112</span>]: PosixPath(<span class="string">'/home/python/magedu/projects'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="磁盘根前戳-drive"><a href="#磁盘根前戳-drive" class="headerlink" title="磁盘根前戳.drive"></a>磁盘根前戳.drive</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>p3 = Path(<span class="string">'D:\Program Files\XMind\XMind.exe'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p3.drive</span><br><span class="line"><span class="string">'D:'</span></span><br></pre></td></tr></table></figure>
<h2 id="对-进行扩展-expanduser"><a href="#对-进行扩展-expanduser" class="headerlink" title="对~进行扩展.expanduser"></a>对~进行扩展.expanduser</h2><p>返回扩展的 <code>~</code> 和 <code>~user</code> 的一个新路径</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">136</span>]: p4 = Path(<span class="string">'~/magedu/projects/test/sample.txt'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">137</span>]: p4.expanduser()</span><br><span class="line">Out[<span class="number">137</span>]: PosixPath(<span class="string">'/home/python/magedu/projects/test/sample.txt'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="用户家目录-home"><a href="#用户家目录-home" class="headerlink" title="用户家目录.home"></a>用户家目录.home</h2><p>这是公共方法</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">175</span>]: p4.home()</span><br><span class="line">Out[<span class="number">175</span>]: PosixPath(<span class="string">'/home/python'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">176</span>]: p3.home()</span><br><span class="line">Out[<span class="number">176</span>]: PosixPath(<span class="string">'/home/python'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">178</span>]: p3</span><br><span class="line">Out[<span class="number">178</span>]: PosixPath(<span class="string">'D:\\Program Files\\XMind\\XMind.exe'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">179</span>]: p4</span><br><span class="line">Out[<span class="number">179</span>]: PosixPath(<span class="string">'~/magedu/projects/test/sample.txt'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="路径拼接-joinpath"><a href="#路径拼接-joinpath" class="headerlink" title="路径拼接.joinpath"></a>路径拼接.joinpath</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">369</span>]: p5</span><br><span class="line">Out[<span class="number">369</span>]: PosixPath(<span class="string">'/dev'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">370</span>]: p5.joinpath(<span class="string">'tty'</span>)</span><br><span class="line">Out[<span class="number">370</span>]: PosixPath(<span class="string">'/dev/tty'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="路径模式匹配-match"><a href="#路径模式匹配-match" class="headerlink" title="路径模式匹配.match"></a>路径模式匹配.match</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">424</span>]: p2</span><br><span class="line">Out[<span class="number">424</span>]: PosixPath(<span class="string">'/home/python/magedu/projects/test/sample.txt'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">425</span>]: p2.match(<span class="string">'*.txt'</span>)</span><br><span class="line">Out[<span class="number">425</span>]: <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">436</span>]: p2.match(<span class="string">'**/*.txt'</span>)</span><br><span class="line">Out[<span class="number">436</span>]: <span class="literal">True</span></span><br></pre></td></tr></table></figure>
<h2 id="父目录-parent"><a href="#父目录-parent" class="headerlink" title="父目录.parent"></a>父目录.parent</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">37</span>]: p2</span><br><span class="line">Out[<span class="number">37</span>]: PosixPath(<span class="string">'/etc/sysconfig/network-scripts/ifcfg-ens34'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">38</span>]: p2.parent</span><br><span class="line">Out[<span class="number">38</span>]: PosixPath(<span class="string">'/etc/sysconfig/network-scripts'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="所有的父目录-parents"><a href="#所有的父目录-parents" class="headerlink" title="所有的父目录.parents"></a>所有的父目录.parents</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">41</span>]: list(p2.parents)</span><br><span class="line">Out[<span class="number">41</span>]: </span><br><span class="line">[PosixPath(<span class="string">'/etc/sysconfig/network-scripts'</span>),</span><br><span class="line"> PosixPath(<span class="string">'/etc/sysconfig'</span>),</span><br><span class="line"> PosixPath(<span class="string">'/etc'</span>),</span><br><span class="line"> PosixPath(<span class="string">'/'</span>)]</span><br></pre></td></tr></table></figure>
<h2 id="文件全名-name"><a href="#文件全名-name" class="headerlink" title="文件全名.name"></a>文件全名.name</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">15</span>]: p2 = Path(<span class="string">'/etc/sysconfig/network-scripts/ifcfg-ens34'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">16</span>]: p2.name</span><br><span class="line">Out[<span class="number">16</span>]: <span class="string">'ifcfg-ens34'</span></span><br></pre></td></tr></table></figure>
<h2 id="取得文件和目录的二元组"><a href="#取得文件和目录的二元组" class="headerlink" title="取得文件和目录的二元组"></a>取得文件和目录的二元组</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">545</span>]: <span class="keyword">from</span> os <span class="keyword">import</span> path</span><br><span class="line"></span><br><span class="line">In [<span class="number">548</span>]: p2</span><br><span class="line">Out[<span class="number">548</span>]: PosixPath(<span class="string">'/etc/sysconfig/network-scripts/ifcfg-ens34'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">547</span>]: print(path.split(path.abspath(str(p2))))</span><br><span class="line">(<span class="string">'/etc/sysconfig/network-scripts'</span>, <span class="string">'ifcfg-ens34'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="不含扩展名的文件名称-stem"><a href="#不含扩展名的文件名称-stem" class="headerlink" title="不含扩展名的文件名称.stem"></a>不含扩展名的文件名称.stem</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">368</span>]: p7 = Path(<span class="string">'/etc/rc.local'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">369</span>]: p7.stem</span><br><span class="line">Out[<span class="number">369</span>]: <span class="string">'rc'</span></span><br></pre></td></tr></table></figure>
<h2 id="显示文件扩展名-suffix"><a href="#显示文件扩展名-suffix" class="headerlink" title="显示文件扩展名.suffix"></a>显示文件扩展名.suffix</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">368</span>]: p7 = Path(<span class="string">'/etc/rc.local'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">370</span>]: p7.suffix</span><br><span class="line">Out[<span class="number">370</span>]: <span class="string">'.local'</span></span><br></pre></td></tr></table></figure>
<h2 id="显示所有扩展名-suffixes"><a href="#显示所有扩展名-suffixes" class="headerlink" title="显示所有扩展名.suffixes"></a>显示所有扩展名.suffixes</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">372</span>]: p8 = Path(<span class="string">'/tmp/mysql.tar.gz'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">373</span>]: p8.suffixes</span><br><span class="line">Out[<span class="number">373</span>]: [<span class="string">'.tar'</span>, <span class="string">'.gz'</span>]</span><br></pre></td></tr></table></figure>
<h2 id="路径拆分为列表-parts"><a href="#路径拆分为列表-parts" class="headerlink" title="路径拆分为列表.parts"></a>路径拆分为列表.parts</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">42</span>]: list(p2.parts)</span><br><span class="line">Out[<span class="number">42</span>]: [<span class="string">'/'</span>, <span class="string">'etc'</span>, <span class="string">'sysconfig'</span>, <span class="string">'network-scripts'</span>, <span class="string">'ifcfg-ens34'</span>]</span><br></pre></td></tr></table></figure>
<h2 id="计算相对剩余路径-relative-to"><a href="#计算相对剩余路径-relative-to" class="headerlink" title="计算相对剩余路径.relative_to"></a>计算相对剩余路径.relative_to</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">78</span>]: p3 = Path(<span class="string">'python/project/cmdb'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">79</span>]: p3.relative_to(<span class="string">'python'</span>)</span><br><span class="line">Out[<span class="number">79</span>]: PosixPath(<span class="string">'project/cmdb'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="显示根目录-root"><a href="#显示根目录-root" class="headerlink" title="显示根目录.root"></a>显示根目录.root</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">297</span>]: p2</span><br><span class="line">Out[<span class="number">297</span>]: PosixPath(<span class="string">'/etc/sysconfig/network-scripts/ifcfg-ens34'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">298</span>]: p2.root</span><br><span class="line">Out[<span class="number">298</span>]: <span class="string">'/'</span></span><br></pre></td></tr></table></figure>
<h2 id="替换显示-with-name"><a href="#替换显示-with-name" class="headerlink" title="替换显示.with_name"></a>替换显示.with_name</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">504</span>]: p2</span><br><span class="line">Out[<span class="number">504</span>]: PosixPath(<span class="string">'/etc/sysconfig/network-scripts/ifcfg-ens34'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">505</span>]: p2.with_name(<span class="string">'ifcfg-ens33'</span>)</span><br><span class="line">Out[<span class="number">505</span>]: PosixPath(<span class="string">'/etc/sysconfig/network-scripts/ifcfg-ens33'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">506</span>]: p2</span><br><span class="line">Out[<span class="number">506</span>]: PosixPath(<span class="string">'/etc/sysconfig/network-scripts/ifcfg-ens34'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="替换显示扩展名-with-suffix"><a href="#替换显示扩展名-with-suffix" class="headerlink" title="替换显示扩展名.with_suffix"></a>替换显示扩展名.with_suffix</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">510</span>]: p1</span><br><span class="line">Out[<span class="number">510</span>]: PosixPath(<span class="string">'D:\\Program Files\\Foxmail 7.2\\Foxmail.exe'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">511</span>]: p1.with_suffix(<span class="string">'.msi'</span>)</span><br><span class="line">Out[<span class="number">511</span>]: PosixPath(<span class="string">'D:\\Program Files\\Foxmail 7.2\\Foxmail.msi'</span>)</span><br><span class="line">    </span><br><span class="line">In [<span class="number">512</span>]: p1</span><br><span class="line">Out[<span class="number">512</span>]: PosixPath(<span class="string">'D:\\Program Files\\Foxmail 7.2\\Foxmail.exe'</span>)</span><br></pre></td></tr></table></figure>
<h1 id="文件检测Path"><a href="#文件检测Path" class="headerlink" title="文件检测Path"></a>文件检测Path</h1><h2 id="模块的导入-1"><a href="#模块的导入-1" class="headerlink" title="模块的导入"></a>模块的导入</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line">p1 = Path(<span class="string">'/etc/rc.local'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="是否绝对路径-is-absolute"><a href="#是否绝对路径-is-absolute" class="headerlink" title="是否绝对路径.is_absolute"></a>是否绝对路径.is_absolute</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">183</span>]: p1</span><br><span class="line">Out[<span class="number">183</span>]: PosixPath(<span class="string">'sample.txt'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">185</span>]: p1.is_absolute()</span><br><span class="line">Out[<span class="number">185</span>]: <span class="literal">False</span></span><br><span class="line">    </span><br><span class="line">In [<span class="number">187</span>]: p2</span><br><span class="line">Out[<span class="number">187</span>]: PosixPath(<span class="string">'/home/python/magedu/projects/test/sample.txt'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">188</span>]: p2.is_absolute()</span><br><span class="line">Out[<span class="number">188</span>]: <span class="literal">True</span></span><br></pre></td></tr></table></figure>
<h2 id="是否为块设备-is-block-device"><a href="#是否为块设备-is-block-device" class="headerlink" title="是否为块设备.is_block_device"></a>是否为块设备.is_block_device</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">193</span>]: p6 = Path(<span class="string">'/dev/sda'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">194</span>]: p6.is_block_device()</span><br><span class="line">Out[<span class="number">194</span>]: <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">195</span>]: p5</span><br><span class="line">Out[<span class="number">195</span>]: PosixPath(<span class="string">'/dev'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">196</span>]: p5.is_block_device()</span><br><span class="line">Out[<span class="number">196</span>]: <span class="literal">False</span></span><br></pre></td></tr></table></figure>
<h2 id="是否为字符设备-is-char-device"><a href="#是否为字符设备-is-char-device" class="headerlink" title="是否为字符设备.is_char_device"></a>是否为字符设备.is_char_device</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">197</span>]: p7 = Path(<span class="string">'/dev/tty'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">198</span>]: p7.is_char_device()</span><br><span class="line">Out[<span class="number">198</span>]: <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">199</span>]: p6</span><br><span class="line">Out[<span class="number">199</span>]: PosixPath(<span class="string">'/dev/sda'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">200</span>]: p6.is_char_device()</span><br><span class="line">Out[<span class="number">200</span>]: <span class="literal">False</span></span><br></pre></td></tr></table></figure>
<h2 id="是否为目录-is-dir"><a href="#是否为目录-is-dir" class="headerlink" title="是否为目录.is_dir"></a>是否为目录.is_dir</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">204</span>]: p4</span><br><span class="line">Out[<span class="number">204</span>]: PosixPath(<span class="string">'~/magedu/projects/test/sample.txt'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">205</span>]: p5</span><br><span class="line">Out[<span class="number">205</span>]: PosixPath(<span class="string">'/dev'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">206</span>]: p4.is_dir()</span><br><span class="line">Out[<span class="number">206</span>]: <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">207</span>]: p5.is_dir()</span><br><span class="line">Out[<span class="number">207</span>]: <span class="literal">True</span></span><br></pre></td></tr></table></figure>
<h2 id="是否为先进先出文件-is-fifo"><a href="#是否为先进先出文件-is-fifo" class="headerlink" title="是否为先进先出文件.is_fifo"></a>是否为先进先出文件.is_fifo</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">253</span>]: p8 = Path(<span class="string">'/run/systemd/initctl/fifo'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">254</span>]: p8.is_fifo()</span><br><span class="line">Out[<span class="number">254</span>]: <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">256</span>]: p7</span><br><span class="line">Out[<span class="number">256</span>]: PosixPath(<span class="string">'/dev/tty'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">257</span>]: p7.is_fifo()</span><br><span class="line">Out[<span class="number">257</span>]: <span class="literal">False</span></span><br></pre></td></tr></table></figure>
<h2 id="是否为普通文件-is-file"><a href="#是否为普通文件-is-file" class="headerlink" title="是否为普通文件.is_file"></a>是否为普通文件.is_file</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">266</span>]: p3</span><br><span class="line">Out[<span class="number">266</span>]: PosixPath(<span class="string">'D:\\Program Files\\XMind\\XMind.exe'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">267</span>]: p3.is_file()</span><br><span class="line">Out[<span class="number">267</span>]: <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">270</span>]: p2</span><br><span class="line">Out[<span class="number">270</span>]: PosixPath(<span class="string">'/home/python/magedu/projects/test/sample.txt'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">271</span>]: p2.is_file()</span><br><span class="line">Out[<span class="number">271</span>]: <span class="literal">True</span></span><br></pre></td></tr></table></figure>
<h2 id="有无系统保留名称-is-reserved"><a href="#有无系统保留名称-is-reserved" class="headerlink" title="有无系统保留名称.is_reserved"></a>有无系统保留名称.is_reserved</h2><p>如果路径包含系统保留的特殊名称之一（如果有），则返回True。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">272</span>]: p2</span><br><span class="line">Out[<span class="number">272</span>]: PosixPath(<span class="string">'/home/python/magedu/projects/test/sample.txt'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">273</span>]: p2.is_reserved()</span><br><span class="line">Out[<span class="number">273</span>]: <span class="literal">False</span></span><br></pre></td></tr></table></figure>
<h2 id="是否为套接字文件-is-socket"><a href="#是否为套接字文件-is-socket" class="headerlink" title="是否为套接字文件.is_socket"></a>是否为套接字文件.is_socket</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">307</span>]: p9 = Path(<span class="string">'/run/docker.sock'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">308</span>]: p9.is_socket()</span><br><span class="line">Out[<span class="number">308</span>]: <span class="literal">True</span></span><br></pre></td></tr></table></figure>
<h2 id="是否为软链接-is-symlink"><a href="#是否为软链接-is-symlink" class="headerlink" title="是否为软链接.is_symlink"></a>是否为软链接.is_symlink</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">310</span>]: p7</span><br><span class="line">Out[<span class="number">310</span>]: PosixPath(<span class="string">'/dev/tty'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">311</span>]: p7.is_symlink()</span><br><span class="line">Out[<span class="number">311</span>]: <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">312</span>]: p9 = Path(<span class="string">'/etc/rc.local'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">313</span>]: p9.is_symlink()</span><br><span class="line">Out[<span class="number">313</span>]: <span class="literal">True</span></span><br></pre></td></tr></table></figure>
<h2 id="是否为同一个路径-samefile"><a href="#是否为同一个路径-samefile" class="headerlink" title="是否为同一个路径.samefile"></a>是否为同一个路径.samefile</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">309</span>]: p2</span><br><span class="line">Out[<span class="number">309</span>]: PosixPath(<span class="string">'/etc/sysconfig/network-scripts/ifcfg-ens34'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">310</span>]: p4</span><br><span class="line">Out[<span class="number">310</span>]: PosixPath(<span class="string">'ifcfg-ens34'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">311</span>]: p4.samefile(p2)</span><br><span class="line">Out[<span class="number">311</span>]: <span class="literal">True</span></span><br><span class="line">    </span><br><span class="line">In [<span class="number">356</span>]: p5</span><br><span class="line">Out[<span class="number">356</span>]: PosixPath(<span class="string">'/tmp/test'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">357</span>]: p5.samefile(<span class="string">'test'</span>)</span><br><span class="line">Out[<span class="number">357</span>]: <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">358</span>]: p5.samefile(<span class="string">'/tmp/test'</span>)</span><br><span class="line">Out[<span class="number">358</span>]: <span class="literal">True</span></span><br></pre></td></tr></table></figure>
<h2 id="文件存在性-exists"><a href="#文件存在性-exists" class="headerlink" title="文件存在性.exists"></a>文件存在性.exists</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>p3 = Path(<span class="string">'D:\Program Files\XMind\XMind.exe'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p3.exists()</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p3 = Path(<span class="string">'D:\Program Files\XMind\XMind.exe.bak'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p3.exists()</span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure>
<h1 id="文件操作Path"><a href="#文件操作Path" class="headerlink" title="文件操作Path"></a>文件操作Path</h1><h2 id="模块的导入-2"><a href="#模块的导入-2" class="headerlink" title="模块的导入"></a>模块的导入</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line">p1 = Path(<span class="string">'/etc/rc.local'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="通配文件迭代器-glob"><a href="#通配文件迭代器-glob" class="headerlink" title="通配文件迭代器.glob"></a>通配文件迭代器.glob</h2><p>使用指定的模式迭代目录下的文件，列出符合条件的文件</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">146</span>]: p5 =Path(<span class="string">'/dev'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">147</span>]: list(p5.glob(<span class="string">'sda*'</span>))</span><br><span class="line">Out[<span class="number">147</span>]: </span><br><span class="line">[PosixPath(<span class="string">'/dev/sda4'</span>),</span><br><span class="line"> PosixPath(<span class="string">'/dev/sda3'</span>),</span><br><span class="line"> PosixPath(<span class="string">'/dev/sda2'</span>),</span><br><span class="line"> PosixPath(<span class="string">'/dev/sda1'</span>),</span><br><span class="line"> PosixPath(<span class="string">'/dev/sda'</span>)]</span><br><span class="line">In [<span class="number">152</span>]: list(p5.glob(<span class="string">'map*'</span>))</span><br><span class="line">Out[<span class="number">152</span>]: [PosixPath(<span class="string">'/dev/mapper'</span>)]</span><br></pre></td></tr></table></figure>
<h2 id="递归统配迭代器-rglob"><a href="#递归统配迭代器-rglob" class="headerlink" title="递归统配迭代器.rglob"></a>递归统配迭代器.rglob</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">162</span>]: list(p5.rglob(<span class="string">'vfio'</span>))</span><br><span class="line">Out[<span class="number">162</span>]: [PosixPath(<span class="string">'/dev/vfio'</span>), PosixPath(<span class="string">'/dev/vfio/vfio'</span>)]</span><br></pre></td></tr></table></figure>
<h2 id="非递归目录迭代器-iterdir"><a href="#非递归目录迭代器-iterdir" class="headerlink" title="非递归目录迭代器.iterdir"></a>非递归目录迭代器.iterdir</h2> <figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">364</span>]: p10 = Path(<span class="string">'/home'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">365</span>]: p10.iterdir()</span><br><span class="line">Out[<span class="number">365</span>]: &lt;generator object Path.iterdir at <span class="number">0x7fe1e91114c0</span>&gt;</span><br><span class="line"></span><br><span class="line">In [<span class="number">366</span>]: list(p10.iterdir())</span><br><span class="line">Out[<span class="number">366</span>]: [PosixPath(<span class="string">'/home/python'</span>)]</span><br></pre></td></tr></table></figure>
<h2 id="创建目录-mkdir"><a href="#创建目录-mkdir" class="headerlink" title="创建目录.mkdir"></a>创建目录.mkdir</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">8</span>]: p1 = Path(<span class="string">'./test'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">11</span>]: ll</span><br><span class="line">总用量 <span class="number">16</span></span><br><span class="line">-rwxr-xr-x <span class="number">1</span> python <span class="number">13099</span> <span class="number">10</span>月 <span class="number">23</span> <span class="number">2017</span> sample.txt*</span><br><span class="line"></span><br><span class="line">In [<span class="number">12</span>]: p1.mkdir()</span><br><span class="line"></span><br><span class="line">In [<span class="number">13</span>]: ll</span><br><span class="line">总用量 <span class="number">16</span></span><br><span class="line">-rwxr-xr-x <span class="number">1</span> python <span class="number">13099</span> <span class="number">10</span>月 <span class="number">23</span> <span class="number">2017</span> sample.txt*</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python     <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">09</span>:<span class="number">01</span> test/</span><br></pre></td></tr></table></figure>
<h2 id="删除空目录-rmdir"><a href="#删除空目录-rmdir" class="headerlink" title="删除空目录.rmdir"></a>删除空目录.rmdir</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">284</span>]: ll</span><br><span class="line">总用量 <span class="number">0</span></span><br><span class="line">lrwxrwxrwx 1 python 42 4月  25 09:59 ifcfg-ens34 -&gt; /etc/sysconfig/network-scripts/ifcfg-ens34</span><br><span class="line">drwxrwxr-x <span class="number">3</span> python <span class="number">22</span> <span class="number">3</span>月   <span class="number">6</span> <span class="number">09</span>:<span class="number">47</span> magedu/</span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python  <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">09</span>:<span class="number">58</span> test</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python  <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">10</span>:<span class="number">00</span> testdir/</span><br><span class="line"></span><br><span class="line">In [<span class="number">285</span>]: p5</span><br><span class="line">Out[<span class="number">285</span>]: PosixPath(<span class="string">'testdir'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">286</span>]: p5.rmdir()</span><br><span class="line"></span><br><span class="line">In [<span class="number">287</span>]: ll</span><br><span class="line">总用量 <span class="number">0</span></span><br><span class="line">lrwxrwxrwx 1 python 42 4月  25 09:59 ifcfg-ens34 -&gt; /etc/sysconfig/network-scripts/ifcfg-ens34</span><br><span class="line">drwxrwxr-x <span class="number">3</span> python <span class="number">22</span> <span class="number">3</span>月   <span class="number">6</span> <span class="number">09</span>:<span class="number">47</span> magedu/</span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python  <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">09</span>:<span class="number">58</span> test</span><br></pre></td></tr></table></figure>
<h2 id="文件属主-owner"><a href="#文件属主-owner" class="headerlink" title="文件属主.owner"></a>文件属主.owner</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">169</span>]: p5.owner()</span><br><span class="line">Out[<span class="number">169</span>]: <span class="string">'root'</span></span><br></pre></td></tr></table></figure>
<h2 id="文件属组-group"><a href="#文件属组-group" class="headerlink" title="文件属组.group"></a>文件属组.group</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">170</span>]: p5.group()</span><br><span class="line">Out[<span class="number">170</span>]: <span class="string">'root'</span></span><br></pre></td></tr></table></figure>
<h2 id="打开文件-open"><a href="#打开文件-open" class="headerlink" title="打开文件.open"></a>打开文件.open</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">15</span>]: p2 = Path(<span class="string">'/etc/sysconfig/network-scripts/ifcfg-ens34'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">21</span>]: netfile = p2.open()</span><br><span class="line"></span><br><span class="line">In [<span class="number">22</span>]: netfile.read()</span><br><span class="line">Out[<span class="number">22</span>]: <span class="string">'BOOTPROTO=static\nDEVICE=ens34\nONBOOT=yes\nIPADDR=192.168.100.253\nNETMASK=255.255.255.0\n'</span></span><br></pre></td></tr></table></figure>
<h3 id="字节模式"><a href="#字节模式" class="headerlink" title="字节模式"></a>字节模式</h3><ul>
<li>读取.read_bytes</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">47</span>]: p2.read_bytes()</span><br><span class="line">Out[<span class="number">47</span>]: <span class="string">b'BOOTPROTO=static\nDEVICE=ens34\nONBOOT=yes\nIPADDR=192.168.100.253\nNETMASK=255.255.255.0\n'</span></span><br></pre></td></tr></table></figure>
<ul>
<li>写入.write_bytes</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">525</span>]: p5</span><br><span class="line">Out[<span class="number">525</span>]: PosixPath(<span class="string">'/tmp/test'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">527</span>]: p5.write_bytes(<span class="string">b'abc'</span>)</span><br><span class="line">Out[<span class="number">527</span>]: <span class="number">3</span></span><br><span class="line">    </span><br><span class="line">In [<span class="number">530</span>]: cat test</span><br><span class="line">abc</span><br></pre></td></tr></table></figure>
<h3 id="文本模式"><a href="#文本模式" class="headerlink" title="文本模式"></a>文本模式</h3><ul>
<li>读取.read_text</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">49</span>]: p2.read_text()</span><br><span class="line">Out[<span class="number">49</span>]: <span class="string">'BOOTPROTO=static\nDEVICE=ens34\nONBOOT=yes\nIPADDR=192.168.100.253\nNETMASK=255.255.255.0\n'</span></span><br></pre></td></tr></table></figure>
<ul>
<li>写入.write_text</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">535</span>]: ll</span><br><span class="line">总用量 <span class="number">0</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">536</span>]: p5</span><br><span class="line">Out[<span class="number">536</span>]: PosixPath(<span class="string">'/tmp/test'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">537</span>]: p5.write_text(<span class="string">'你好'</span>)</span><br><span class="line">Out[<span class="number">537</span>]: <span class="number">2</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">538</span>]: cat test</span><br><span class="line">你好</span><br></pre></td></tr></table></figure>
<h2 id="显示链接文件属性-lstat"><a href="#显示链接文件属性-lstat" class="headerlink" title="显示链接文件属性.lstat"></a>显示链接文件属性.lstat</h2><p>文件如果为链接文件则显示链接文件的属性</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">405</span>]: p2.lstat()</span><br><span class="line">Out[<span class="number">405</span>]: os.stat_result(st_mode=<span class="number">33261</span>, st_ino=<span class="number">34651681</span>, st_dev=<span class="number">2052</span>, st_nlink=<span class="number">1</span>, st_uid=<span class="number">1000</span>, st_gid=<span class="number">1000</span>, st_size=<span class="number">13099</span>, st_atime=<span class="number">1524531777</span>, st_mtime=<span class="number">1508733030</span>, st_ctime=<span class="number">1524568268</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">406</span>]: p2</span><br><span class="line">Out[<span class="number">406</span>]: PosixPath(<span class="string">'/home/python/magedu/projects/test/sample.txt'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="显示文件详细属性-stat"><a href="#显示文件详细属性-stat" class="headerlink" title="显示文件详细属性.stat"></a>显示文件详细属性.stat</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">360</span>]: p5.stat()</span><br><span class="line">Out[<span class="number">360</span>]: os.stat_result(st_mode=<span class="number">33204</span>, st_ino=<span class="number">17029845</span>, st_dev=<span class="number">2052</span>, st_nlink=<span class="number">1</span>, st_uid=<span class="number">1000</span>, st_gid=<span class="number">1000</span>, st_size=<span class="number">0</span>, st_atime=<span class="number">1524622003</span>, st_mtime=<span class="number">1524622003</span>, st_ctime=<span class="number">1524622003</span>)</span><br></pre></td></tr></table></figure>
<h2 id="创建空文件更新时间戳-touch"><a href="#创建空文件更新时间戳-touch" class="headerlink" title="创建空文件更新时间戳.touch"></a>创建空文件更新时间戳.touch</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">433</span>]: p4</span><br><span class="line">Out[<span class="number">433</span>]: PosixPath(<span class="string">'/tmp/test'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">436</span>]: p4.touch()</span><br><span class="line"></span><br><span class="line">In [<span class="number">437</span>]: ll</span><br><span class="line">总用量 <span class="number">0</span></span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">10</span>:<span class="number">23</span> test</span><br></pre></td></tr></table></figure>
<h2 id="修改文件名称-rename"><a href="#修改文件名称-rename" class="headerlink" title="修改文件名称.rename"></a>修改文件名称.rename</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">166</span>]: p4</span><br><span class="line">Out[<span class="number">166</span>]: PosixPath(<span class="string">'test1'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">167</span>]: p4.rename(<span class="string">'test2'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="移动或改名-replace"><a href="#移动或改名-replace" class="headerlink" title="移动或改名.replace"></a>移动或改名.replace</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">217</span>]: ll</span><br><span class="line">总用量 <span class="number">0</span></span><br><span class="line">drwxrwxr-x <span class="number">3</span> python <span class="number">22</span> <span class="number">3</span>月   <span class="number">6</span> <span class="number">09</span>:<span class="number">47</span> magedu/</span><br><span class="line">---------- <span class="number">1</span> python  <span class="number">0</span> <span class="number">4</span>月  <span class="number">24</span> <span class="number">20</span>:<span class="number">05</span> test</span><br><span class="line"></span><br><span class="line">In [<span class="number">218</span>]: p4 = Path(<span class="string">'./test'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">219</span>]: p4.replace(<span class="string">'/tmp/test'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">220</span>]: ll</span><br><span class="line">总用量 <span class="number">0</span></span><br><span class="line">drwxrwxr-x <span class="number">3</span> python <span class="number">22</span> <span class="number">3</span>月   <span class="number">6</span> <span class="number">09</span>:<span class="number">47</span> magedu/</span><br></pre></td></tr></table></figure>
<h2 id="新建链接指向目标-symlink-to"><a href="#新建链接指向目标-symlink-to" class="headerlink" title="新建链接指向目标.symlink_to"></a>新建链接指向目标.symlink_to</h2><figure class="highlight"><table><tr><td class="code"><pre><span class="line">In [<span class="number">422</span>]: p4 = Path(<span class="string">'/tmp/test'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">423</span>]: p4.symlink_to(<span class="string">'/etc/rc.local'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">424</span>]: ll</span><br><span class="line">总用量 <span class="number">0</span></span><br><span class="line">lrwxrwxrwx 1 python 13 4月  25 10:21 test -&gt; /etc/rc.local*</span><br></pre></td></tr></table></figure>
<h2 id="解析软连接位置-resolve"><a href="#解析软连接位置-resolve" class="headerlink" title="解析软连接位置.resolve"></a>解析软连接位置.resolve</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">261</span>]: ll</span><br><span class="line">总用量 <span class="number">0</span></span><br><span class="line">lrwxrwxrwx 1 python 42 4月  25 09:59 ifcfg-ens34 -&gt; /etc/sysconfig/network-scripts/ifcfg-ens34</span><br><span class="line">drwxrwxr-x <span class="number">3</span> python <span class="number">22</span> <span class="number">3</span>月   <span class="number">6</span> <span class="number">09</span>:<span class="number">47</span> magedu/</span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python  <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">09</span>:<span class="number">58</span> test</span><br><span class="line"></span><br><span class="line">In [<span class="number">263</span>]: p4 = Path(<span class="string">'ifcfg-ens34'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">264</span>]: p4.resolve()</span><br><span class="line">Out[<span class="number">264</span>]: PosixPath(<span class="string">'/etc/sysconfig/network-scripts/ifcfg-ens34'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="删除文件或取消链接-unlink"><a href="#删除文件或取消链接-unlink" class="headerlink" title="删除文件或取消链接.unlink"></a>删除文件或取消链接.unlink</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">491</span>]: ll</span><br><span class="line">总用量 <span class="number">0</span></span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">10</span>:<span class="number">31</span> test</span><br><span class="line"></span><br><span class="line">In [<span class="number">492</span>]: p4</span><br><span class="line">Out[<span class="number">492</span>]: PosixPath(<span class="string">'/tmp/test'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">494</span>]: p4.unlink()</span><br><span class="line"></span><br><span class="line">In [<span class="number">495</span>]: ll</span><br><span class="line">总用量 <span class="number">0</span></span><br></pre></td></tr></table></figure>
<h2 id="文件权限-chmod"><a href="#文件权限-chmod" class="headerlink" title="文件权限.chmod"></a>文件权限.chmod</h2><p>接受一个十进制的权限描述</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">101</span>]: p2.chmod(<span class="number">493</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">102</span>]: ll</span><br><span class="line">总用量 <span class="number">16</span></span><br><span class="line">-rwxr-xr-x <span class="number">1</span> python <span class="number">13099</span> <span class="number">10</span>月 <span class="number">23</span> <span class="number">2017</span> sample.txt*</span><br></pre></td></tr></table></figure>
<h2 id="链接文件权限-lchmod"><a href="#链接文件权限-lchmod" class="headerlink" title="链接文件权限.lchmod"></a>链接文件权限.lchmod</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="文件复制shutil"><a href="#文件复制shutil" class="headerlink" title="文件复制shutil"></a>文件复制shutil</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> shutil</span><br></pre></td></tr></table></figure>
<h2 id="返回sh命令位置-which"><a href="#返回sh命令位置-which" class="headerlink" title="返回sh命令位置.which"></a>返回sh命令位置.which</h2><p>语法: <code>shutil.which(cmd, mode=os.F_OK | os.X_OK, path=None)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">106</span>]: shutil.which(<span class="string">'copy'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">107</span>]: shutil.which(<span class="string">'cat'</span>)</span><br><span class="line">Out[<span class="number">107</span>]: <span class="string">'/usr/bin/cat'</span></span><br></pre></td></tr></table></figure>
<h2 id="复制文件-copyfile"><a href="#复制文件-copyfile" class="headerlink" title="复制文件.copyfile"></a>复制文件.copyfile</h2><p>默认从指定源复制到目标，如果 <code>follow_symlinks=False</code> 则复制仅复制链接。</p>
<p>语法: <code>shutil.copyfile(src, dst, *, follow_symlinks=True)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">34</span>]: shutil.copyfile(<span class="string">'sample.txt'</span>,<span class="string">'sample.txt.bak'</span>)</span><br><span class="line">Out[<span class="number">34</span>]: <span class="string">'sample.txt.bak'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">35</span>]: ll</span><br><span class="line">总用量 <span class="number">32</span></span><br><span class="line">-rwxr-xr-x <span class="number">1</span> python <span class="number">13099</span> <span class="number">10</span>月 <span class="number">23</span> <span class="number">2017</span> sample.txt*</span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">25</span> sample.txt.bak</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python     <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">09</span>:<span class="number">01</span> test/</span><br></pre></td></tr></table></figure>
<h2 id="从指针处复制文件-copyfileobj"><a href="#从指针处复制文件-copyfileobj" class="headerlink" title="从指针处复制文件.copyfileobj"></a>从指针处复制文件.copyfileobj</h2><p>语法: <code>shutil.copyfileobj(fsrc, fdst[, length])</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">8</span>]: <span class="keyword">with</span> open(<span class="string">'sample.txt'</span>,<span class="string">'r+'</span>) <span class="keyword">as</span> file1:</span><br><span class="line">   ...:     file1.seek(<span class="number">200</span>)</span><br><span class="line">   ...:     <span class="keyword">with</span> open(<span class="string">'sample.txt.bak'</span>,<span class="string">'w+'</span>) <span class="keyword">as</span> file2:</span><br><span class="line">   ...:         <span class="keyword">import</span> shutil</span><br><span class="line">   ...:         shutil.copyfileobj(file1,file2)</span><br></pre></td></tr></table></figure>
<h2 id="复制文件-copy"><a href="#复制文件-copy" class="headerlink" title="复制文件.copy"></a>复制文件.copy</h2><blockquote>
<p>仅复制文件不能复制目录</p>
</blockquote>
<p>复制文件到目标，如果目标为目录则复制到目标目录中。<code>(copyfile函数如果目标为目录会报错)</code></p>
<p>语法: <code>shutil.copy(src, dst, *, follow_symlinks=True)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">135</span>]: shutil.copy(<span class="string">'sample.txt'</span>,<span class="string">'test'</span>)</span><br><span class="line">Out[<span class="number">135</span>]: <span class="string">'test/sample.txt'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">136</span>]: ll</span><br><span class="line">总用量 <span class="number">32</span></span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt.bak</span><br><span class="line">lrwxrwxrwx 1 python    10 4月  25 14:25 sample.txt.lnk -&gt; sample.txt</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python    <span class="number">24</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">50</span> test/</span><br><span class="line"></span><br><span class="line">In [<span class="number">137</span>]: ll test/</span><br><span class="line">总用量 <span class="number">16</span></span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">50</span> sample.txt</span><br></pre></td></tr></table></figure>
<h2 id="复制文件元数据-copy2"><a href="#复制文件元数据-copy2" class="headerlink" title="复制文件元数据.copy2"></a>复制文件元数据.copy2</h2><blockquote>
<p> 仅复制文件不能复制目录</p>
</blockquote>
<p>语法: <code>shutil.copy2(src, dst, *, follow_symlinks=True)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">146</span>]: shutil.copy2(<span class="string">'sample.txt'</span>,<span class="string">'test'</span>)</span><br><span class="line">Out[<span class="number">146</span>]: <span class="string">'test/sample.txt'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">147</span>]: ll ./sample.txt ./test/sample.txt</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> ./sample.txt</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> ./test/sample.txt</span><br></pre></td></tr></table></figure>
<h2 id="递归复制目录-copytree"><a href="#递归复制目录-copytree" class="headerlink" title="递归复制目录.copytree"></a>递归复制目录.copytree</h2><p>递归的复制一个目录，目标目录存在则报错。</p>
<p>语法: <code>shutil.copytree(src, dst, symlinks=False, ignore=None, copy_function=copy2, ignore_dangling_symlinks=False)</code></p>
<p><code>copy_function</code> 指定复制函数，它必须是可用于复制每个文件的可调用函数。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">4</span>]: ll project/</span><br><span class="line">总用量 <span class="number">0</span></span><br><span class="line">drwxrwxr-x <span class="number">2</span> python <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">0</span>/</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">1</span>/</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">2</span>/</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">3</span>/</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">4</span>/</span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">5</span></span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">6</span></span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">7</span></span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">8</span></span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">9</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">9</span>]: shutil.copytree(<span class="string">'project'</span>,<span class="string">'project.bak'</span>,ignore=shutil.ignore_patterns(<span class="string">'0'</span>,<span class="string">'9'</span>))</span><br><span class="line">Out[<span class="number">9</span>]: <span class="string">'project.bak'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">10</span>]: ll project.bak/</span><br><span class="line">总用量 <span class="number">0</span></span><br><span class="line">drwxrwxr-x <span class="number">2</span> python <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">1</span>/</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">2</span>/</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">3</span>/</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">4</span>/</span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">5</span></span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">6</span></span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">7</span></span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">8</span></span><br></pre></td></tr></table></figure>
<ul>
<li>忽略参数.ignore_patterns</li>
</ul>
<p>可以为 <code>copytree</code> 函数的 <code>ignore</code> 参数提供忽略的内容</p>
<p>语法: <code>shutil.ignore_patterns(*patterns)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">shutil.ignore_patterns(<span class="string">'file1'</span>,<span class="string">'file2'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="递归删除目录-rmtree"><a href="#递归删除目录-rmtree" class="headerlink" title="递归删除目录.rmtree"></a>递归删除目录.rmtree</h2><p>语法: <code>shutil.rmtree(path, ignore_errors=False, onerror=None)</code></p>
<p><code>ignore_errors=True</code> 忽略删除过程中出现的错误</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">12</span>]: ll</span><br><span class="line">总用量 <span class="number">32</span></span><br><span class="line">drwxrwxr-x <span class="number">7</span> python    <span class="number">96</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> project/</span><br><span class="line">drwxrwxr-x <span class="number">6</span> python    <span class="number">78</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> project.bak/</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt.bak</span><br><span class="line">lrwxrwxrwx 1 python    10 4月  25 14:25 sample.txt.lnk -&gt; sample.txt</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python    <span class="number">24</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">54</span> test/</span><br><span class="line"></span><br><span class="line">In [<span class="number">14</span>]: shutil.rmtree(<span class="string">'project.bak'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">15</span>]: ll</span><br><span class="line">总用量 <span class="number">32</span></span><br><span class="line">drwxrwxr-x <span class="number">7</span> python    <span class="number">96</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> project/</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt.bak</span><br><span class="line">lrwxrwxrwx 1 python    10 4月  25 14:25 sample.txt.lnk -&gt; sample.txt</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python    <span class="number">24</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">54</span> test/</span><br></pre></td></tr></table></figure>
<h2 id="权限复制-copymode"><a href="#权限复制-copymode" class="headerlink" title="权限复制.copymode"></a>权限复制.copymode</h2><p>两个文件之间的权限复制，从文件到目录，从目录到文件皆可。</p>
<p>复制文件的权限到另外的文件，注意：软链接文件权限不可以修改，（默认777）</p>
<p>语法: <code>shutil.copymode(src, dst, *, follow_symlinks=True)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">100</span>]: ll</span><br><span class="line">总用量 <span class="number">32</span></span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt</span><br><span class="line">---------- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt.bak</span><br><span class="line">lrwxrwxrwx 1 python    10 4月  25 14:25 sample.txt.lnk -&gt; sample.txt</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python     <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> test/</span><br><span class="line"></span><br><span class="line">In [<span class="number">108</span>]: shutil.copymode(<span class="string">'sample.txt'</span>,<span class="string">'sample.txt.bak'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">109</span>]: ll</span><br><span class="line">总用量 <span class="number">32</span></span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt.bak</span><br><span class="line">lrwxrwxrwx 1 python    10 4月  25 14:25 sample.txt.lnk -&gt; sample.txt</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python     <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> test/</span><br></pre></td></tr></table></figure>
<h2 id="元数据复制-copystat"><a href="#元数据复制-copystat" class="headerlink" title="元数据复制.copystat"></a>元数据复制.copystat</h2><p>两个文件之间的元数据复制，从文件到目录，从目录到文件皆可。</p>
<p>语法: <code>shutil.copystat(src, dst, *, follow_symlinks=True)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">124</span>]: !chmod <span class="number">000</span> sample.txt.bak</span><br><span class="line">    </span><br><span class="line">In [<span class="number">121</span>]: ll</span><br><span class="line">总用量 <span class="number">32</span></span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt</span><br><span class="line">---------- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">39</span> sample.txt.bak</span><br><span class="line">lrwxrwxrwx 1 python    10 4月  25 14:25 sample.txt.lnk -&gt; sample.txt</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python     <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> test/</span><br><span class="line"></span><br><span class="line">In [<span class="number">125</span>]: shutil.copystat(<span class="string">'sample.txt'</span>,<span class="string">'sample.txt.bak'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">126</span>]: ll</span><br><span class="line">总用量 <span class="number">32</span></span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt.bak</span><br><span class="line">lrwxrwxrwx 1 python    10 4月  25 14:25 sample.txt.lnk -&gt; sample.txt</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python     <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> test/</span><br></pre></td></tr></table></figure>
<h2 id="移动文件或目录-move"><a href="#移动文件或目录-move" class="headerlink" title="移动文件或目录.move"></a>移动文件或目录.move</h2><p>语法: <code>shutil.move(src, dst, copy_function=copy2)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">32</span>]: ll</span><br><span class="line">总用量 <span class="number">32</span></span><br><span class="line">drwxrwxr-x <span class="number">7</span> python    <span class="number">96</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> project/</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt.bak</span><br><span class="line">lrwxrwxrwx 1 python    10 4月  25 14:25 sample.txt.lnk -&gt; sample.txt</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python    <span class="number">24</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">54</span> test/</span><br><span class="line"></span><br><span class="line">In [<span class="number">34</span>]: shutil.move(<span class="string">'project'</span>,<span class="string">'test'</span>)</span><br><span class="line">Out[<span class="number">34</span>]: <span class="string">'test/project'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">36</span>]: ll test/</span><br><span class="line">总用量 <span class="number">16</span></span><br><span class="line">drwxrwxr-x <span class="number">7</span> python    <span class="number">96</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> project/</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt</span><br><span class="line"></span><br><span class="line">In [<span class="number">37</span>]: shutil.move(<span class="string">'test/project'</span>,<span class="string">'./'</span>)</span><br><span class="line">Out[<span class="number">37</span>]: <span class="string">'./project'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">38</span>]: ll</span><br><span class="line">总用量 <span class="number">32</span></span><br><span class="line">drwxrwxr-x <span class="number">7</span> python    <span class="number">96</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> project/</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt.bak</span><br><span class="line">lrwxrwxrwx 1 python    10 4月  25 14:25 sample.txt.lnk -&gt; sample.txt</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python    <span class="number">24</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">30</span> test/</span><br></pre></td></tr></table></figure>
<h2 id="磁盘使用量-disk-usage"><a href="#磁盘使用量-disk-usage" class="headerlink" title="磁盘使用量.disk_usage"></a>磁盘使用量.disk_usage</h2><p>语法: <code>shutil.disk_usage(path)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">51</span>]: shutil.disk_usage(<span class="string">'/'</span>)</span><br><span class="line">Out[<span class="number">51</span>]: usage(total=<span class="number">19641925632</span>, used=<span class="number">2332303360</span>, free=<span class="number">17309622272</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">52</span>]: shutil.disk_usage(<span class="string">'/dev'</span>)</span><br><span class="line">Out[<span class="number">52</span>]: usage(total=<span class="number">236752896</span>, used=<span class="number">0</span>, free=<span class="number">236752896</span>)</span><br></pre></td></tr></table></figure>
<h2 id="修改文件属主属组-chown"><a href="#修改文件属主属组-chown" class="headerlink" title="修改文件属主属组.chown"></a>修改文件属主属组.chown</h2><p>语法: <code>shutil.chown(path, user=None, group=None)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[root@localhost tmp]<span class="comment"># ll</span></span><br><span class="line">总用量 <span class="number">4</span></span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python python <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">10</span>:<span class="number">40</span> test</span><br><span class="line">[root@localhost bin]<span class="comment"># python3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> shutil</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>shutil.chown(<span class="string">'/tmp/test'</span>,user=<span class="string">'rooot'</span>,group=<span class="string">'root'</span>)</span><br><span class="line">[root@localhost tmp]<span class="comment"># ll</span></span><br><span class="line">总用量 <span class="number">4</span></span><br><span class="line">-rw-rw-r-- <span class="number">1</span> root root <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">10</span>:<span class="number">40</span> test</span><br></pre></td></tr></table></figure>
<h1 id="文件打包shutil"><a href="#文件打包shutil" class="headerlink" title="文件打包shutil"></a>文件打包shutil</h1><h2 id="打包文件-make-archive"><a href="#打包文件-make-archive" class="headerlink" title="打包文件.make_archive"></a>打包文件.make_archive</h2><p>语法: <code>shutil.make_archive(base_name, format[, root_dir[, base_dir[, verbose[, dry_run[, owner[, group[, logger]]]]]]])</code></p>
<ul>
<li>将 <code>/etc</code> 目录以 <code>.tar.gz</code> 格式打包，放在<code>/tmp/mytar</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">289</span>]: shutil.make_archive(<span class="string">'/tmp/mytar'</span>,<span class="string">'gztar'</span>,root_dir=<span class="string">'/etc'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">290</span>]: ll</span><br><span class="line">总用量 <span class="number">4</span></span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python <span class="number">493</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">16</span>:<span class="number">32</span> mytar.tar.gz</span><br></pre></td></tr></table></figure>
<h2 id="解包文件-unpack-archive"><a href="#解包文件-unpack-archive" class="headerlink" title="解包文件.unpack_archive"></a>解包文件.unpack_archive</h2><p>语法: <code>shutil.unpack_archive(filename[, extract_dir[, format]])</code></p>
<ul>
<li>将 <code>/tmp/mytar.tar.gz</code> 文件解压到 <code>/home/python</code> 格式为：<code>gztar</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">299</span>]: shutil.unpack_archive(<span class="string">'/tmp/mytar.tar.gz'</span>,<span class="string">'/home/python'</span>,<span class="string">'gztar'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="存档格式-get-archive-formats"><a href="#存档格式-get-archive-formats" class="headerlink" title="存档格式.get_archive_formats"></a>存档格式.get_archive_formats</h2><p>显示支持的存档格式</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">109</span>]: shutil.get_archive_formats()</span><br><span class="line">Out[<span class="number">109</span>]: </span><br><span class="line">[(<span class="string">'bztar'</span>, <span class="string">"bzip2'ed tar-file"</span>),</span><br><span class="line"> (<span class="string">'gztar'</span>, <span class="string">"gzip'ed tar-file"</span>),</span><br><span class="line"> (<span class="string">'tar'</span>, <span class="string">'uncompressed tar file'</span>),</span><br><span class="line"> (<span class="string">'zip'</span>, <span class="string">'ZIP file'</span>)]</span><br></pre></td></tr></table></figure>
<h2 id="解包格式-get-unpack-formats"><a href="#解包格式-get-unpack-formats" class="headerlink" title="解包格式.get_unpack_formats"></a>解包格式.get_unpack_formats</h2><p>显示支持的解包格式</p>
<p>语法: <code>shutil.unregister_unpack_format(name)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">303</span>]: shutil.get_unpack_formats()</span><br><span class="line">Out[<span class="number">303</span>]: </span><br><span class="line">[(<span class="string">'bztar'</span>, [<span class="string">'.tar.bz2'</span>, <span class="string">'.tbz2'</span>], <span class="string">"bzip2'ed tar-file"</span>),</span><br><span class="line"> (<span class="string">'gztar'</span>, [<span class="string">'.tar.gz'</span>, <span class="string">'.tgz'</span>], <span class="string">"gzip'ed tar-file"</span>),</span><br><span class="line"> (<span class="string">'tar'</span>, [<span class="string">'.tar'</span>], <span class="string">'uncompressed tar file'</span>),</span><br><span class="line"> (<span class="string">'zip'</span>, [<span class="string">'.zip'</span>], <span class="string">'ZIP file'</span>)]</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/34/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/34/">34</a><span class="page-number current">35</span><a class="page-number" href="/page/36/">36</a><span class="space">&hellip;</span><a class="page-number" href="/page/43/">43</a><a class="extend next" rel="next" href="/page/36/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="Jin Heng">
            
              <p class="site-author-name" itemprop="name">Jin Heng</p>
              <p class="site-description motion-element" itemprop="description">越努力越幸运</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">86</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/yangjinheng" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:jinhengyang@foxmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          
        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 &mdash; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jin Heng</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  













  





  

  

  

  
  

  

  

  

</body>
</html>
